package jsengine.parser

import org.junit.Test

import org.junit.Assert.assertThat
import org.junit.matchers.JUnitMatchers.hasItems
import org.hamcrest.CoreMatchers.is
import org.junit.Assert.fail
import ParserTestSupport.getASTOrFail
import ParserTestSupport.verifyFunction
import ParserTestSupport.verifyLiteralObject
import ParserTestSupport.verifyArrayLiteral
import ParserTestSupport.verifyExpression
import ParserTestSupport.verifyParsing
import ParserTestSupport.verifySource
import jsengine.parser.JSParser
import jsengine.ast._
import scala.io.Source

class TestRewriter {

  
  
     def testFile(filename: String) {
    	val result = JSParser.parse(JSParser.source,Source.fromURL(this.getClass().getClassLoader().getResource(filename)).reader)
    	println(result)
    	result match {
    	  case JSParser.Success(ast,_) => println(JSRewriter.rewriteSource(ast))
    	  case JSParser.NoSuccess(message,src) => println("failed")	
    	}

    }
/*
     @Test def testPart1 {
O JSSource(List(
		AssignmentExpression(
		    Operator(=),
		    CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(fn)))),
		    AssignmentExpression(
		        Operator(=),
		        CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(prototype)))),
		        JSLiteralObject(List((JSIdentifier(constructor),JSIdentifier(jQuery)), (JSIdentifier(init),JSString(moved to part 2)), (JSIdentifier(selector),JSString()), (JSIdentifier(jquery),JSString(1.6.2)), (JSIdentifier(length),JSNumber(0)), (JSIdentifier(size),JSFunction(None,List(),List(ReturnStatement(Some(CallExpression(0,JSIdentifier(this),List(ApplyLookup(JSIdentifier(length))))))))), (JSIdentifier(toArray),JSFunction(None,List(),List(ReturnStatement(Some(CallExpression(0,JSIdentifier(slice),List(ApplyLookup(JSIdentifier(call)), ApplyArguments(List(JSIdentifier(this), JSNumber(0)))))))))), (JSIdentifier(get),JSFunction(None,List(JSIdentifier(num)),List(ReturnStatement(Some(ConditionalExpression(BinaryExpression(JSIdentifier(num),List(BinaryExtension(Operator(==),JSIdentifier(null)))),CallExpression(0,JSIdentifier(this),List(ApplyLookup(JSIdentifier(toArray)), ApplyArguments(List()))),ConditionalExpression(BinaryExpression(JSIdentifier(num),List(BinaryExtension(Operator(<),JSNumber(0)))),CallExpression(0,JSIdentifier(this),List(ApplyLookup(BinaryExpression(CallExpression(0,JSIdentifier(this),List(ApplyLookup(JSIdentifier(length)))),List(BinaryExtension(Operator(+),JSIdentifier(num))))))),CallExpression(0,JSIdentifier(this),List(ApplyLookup(JSIdentifier(num))))))))))), (JSIdentifier(pushStack),JSFunction(None,List(JSIdentifier(elems), JSIdentifier(name), JSIdentifier(selector)),List(VariableDeclarations(List(VariableDeclaration(JSIdentifier(ret),Some(CallExpression(0,JSIdentifier(this),List(ApplyLookup(JSIdentifier(constructor)), ApplyArguments(List()))))))), IfStatement(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(isArray)), ApplyArguments(List(JSIdentifier(elems))))),JSBlock(List(CallExpression(0,JSIdentifier(push),List(ApplyLookup(JSIdentifier(apply)), ApplyArguments(List(JSIdentifier(ret), JSIdentifier(elems))))))),Some(JSBlock(List(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(merge)), ApplyArguments(List(JSIdentifier(ret), JSIdentifier(elems))))))))), AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(ret),List(ApplyLookup(JSIdentifier(prevObject)))),JSIdentifier(this)), AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(ret),List(ApplyLookup(JSIdentifier(context)))),CallExpression(0,JSIdentifier(this),List(ApplyLookup(JSIdentifier(context))))), IfStatement(BinaryExpression(JSIdentifier(name),List(BinaryExtension(Operator(===),JSString(find)))),JSBlock(List(AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(ret),List(ApplyLookup(JSIdentifier(selector)))),BinaryExpression(CallExpression(0,JSIdentifier(this),List(ApplyLookup(JSIdentifier(selector)))),List(BinaryExtension(Operator(+),ConditionalExpression(CallExpression(0,JSIdentifier(this),List(ApplyLookup(JSIdentifier(selector)))),JSString( ),JSString())), BinaryExtension(Operator(+),JSIdentifier(selector))))))),Some(IfStatement(JSIdentifier(name),JSBlock(List(AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(ret),List(ApplyLookup(JSIdentifier(selector)))),BinaryExpression(CallExpression(0,JSIdentifier(this),List(ApplyLookup(JSIdentifier(selector)))),List(BinaryExtension(Operator(+),JSString(.)), BinaryExtension(Operator(+),JSIdentifier(name)), BinaryExtension(Operator(+),JSString(()), BinaryExtension(Operator(+),JSIdentifier(selector)), BinaryExtension(Operator(+),JSString()))))))),None))), ReturnStatement(Some(JSIdentifier(ret)))))), (JSIdentifier(each),JSFunction(None,List(JSIdentifier(callback), JSIdentifier(args)),List(ReturnStatement(Some(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(each)), ApplyArguments(List(JSIdentifier(this), JSIdentifier(callback), JSIdentifier(args)))))))))), (JSIdentifier(ready),JSFunction(None,List(JSIdentifier(fn)),List(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(bindReady)), ApplyArguments(List()))), CallExpression(0,JSIdentifier(readyList),List(ApplyLookup(JSIdentifier(done)), ApplyArguments(List(JSIdentifier(fn))))), ReturnStatement(Some(JSIdentifier(this)))))), (JSIdentifier(eq),JSFunction(None,List(JSIdentifier(i)),List(ReturnStatement(Some(ConditionalExpression(BinaryExpression(JSIdentifier(i),List(BinaryExtension(Operator(===),UnaryExpression(List(Operator(-)),JSNumber(1))))),CallExpression(0,JSIdentifier(this),List(ApplyLookup(JSIdentifier(slice)), ApplyArguments(List(JSIdentifier(i))))),CallExpression(0,JSIdentifier(this),List(ApplyLookup(JSIdentifier(slice)), ApplyArguments(List(JSIdentifier(i), BinaryExpression(UnaryExpression(List(Operator(+)),JSIdentifier(i)),List(BinaryExtension(Operator(+),JSNumber(1)))))))))))))), (JSIdentifier(first),JSFunction(None,List(),List(ReturnStatement(Some(CallExpression(0,JSIdentifier(this),List(ApplyLookup(JSIdentifier(eq)), ApplyArguments(List(JSNumber(0)))))))))), (JSIdentifier(last),JSFunction(None,List(),List(ReturnStatement(Some(CallExpression(0,JSIdentifier(this),List(ApplyLookup(JSIdentifier(eq)), ApplyArguments(List(UnaryExpression(List(Operator(-)),JSNumber(1))))))))))), (JSIdentifier(slice),JSFunction(None,List(),List(ReturnStatement(Some(CallExpression(0,JSIdentifier(this),List(ApplyLookup(JSIdentifier(pushStack)), ApplyArguments(List(CallExpression(0,JSIdentifier(slice),List(ApplyLookup(JSIdentifier(apply)), ApplyArguments(List(JSIdentifier(this), JSIdentifier(arguments))))), JSString(slice), CallExpression(0,JSIdentifier(slice),List(ApplyLookup(JSIdentifier(call)), ApplyArguments(List(JSIdentifier(arguments))), ApplyLookup(JSIdentifier(join)), ApplyArguments(List(JSString(,)))))))))))))), (JSIdentifier(map),JSFunction(None,List(JSIdentifier(callback)),List(ReturnStatement(Some(CallExpression(0,JSIdentifier(this),List(ApplyLookup(JSIdentifier(pushStack)), ApplyArguments(List(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(map)), ApplyArguments(List(JSIdentifier(this), JSFunction(None,List(JSIdentifier(elem), JSIdentifier(i)),List(ReturnStatement(Some(CallExpression(0,JSIdentifier(callback),List(ApplyLookup(JSIdentifier(call)), ApplyArguments(List(JSIdentifier(elem), JSIdentifier(i), JSIdentifier(elem)))))))))))))))))))))), (JSIdentifier(end),JSFunction(None,List(),List(ReturnStatement(Some(BinaryExpression(CallExpression(0,JSIdentifier(this),List(ApplyLookup(JSIdentifier(prevObject)))),List(BinaryExtension(Operator(||),CallExpression(0,JSIdentifier(this),List(ApplyLookup(JSIdentifier(constructor)), ApplyArguments(List(JSIdentifier(null))))))))))))), (JSIdentifier(push),JSIdentifier(push)), (JSIdentifier(sort),CallExpression(0,JSArrayLiteral(List()),List(ApplyLookup(JSIdentifier(sort))))), (JSIdentifier(splice),CallExpression(0,JSArrayLiteral(List()),List(ApplyLookup(JSIdentifier(splice)))))))))))




N JSSource(List(
		Assign(
		    Lookup(JSIdentifier(jQuery),JSIdentifier(fn)),
		    Assign(
		        Lookup(JSIdentifier(jQuery),JSIdentifier(prototype)),
		        JSLiteralObject(List(
		            (JSIdentifier(constructor),JSIdentifier(jQuery)), 
		            (JSIdentifier(init),JSString(moved to part 2)), 
		            (JSIdentifier(selector),JSString()), 
		            (JSIdentifier(jquery),JSString(1.6.2)), 
		            (JSIdentifier(length),JSNumber(0)), 
		            (JSIdentifier(size),
		                JSFunction(None,List(),List(
		                    ReturnStatement(Some(
		                        Lookup(JSIdentifier(this),JSIdentifier(length))))))), 
		            (JSIdentifier(toArray),
		                JSFunction(None,List(),List(
		                    ReturnStatement(Some(
		                        Call(Lookup(JSIdentifier(slice),JSIdentifier(call)),List(JSIdentifier(this), JSNumber(0)))))))), 
		            (JSIdentifier(get),
		                JSFunction(None,List(JSIdentifier(num)),List(
		                    ReturnStatement(Some(
		                        ConditionalExpression(
		                            OperatorCall(Operator(==),List(JSIdentifier(num), JSIdentifier(null))),
		                            Call(Lookup(JSIdentifier(this),JSIdentifier(toArray)),List()),
		                            ConditionalExpression(
		                                OperatorCall(Operator(<),List(JSIdentifier(num), JSNumber(0))),
		                                Lookup(
		                                    JSIdentifier(this),
		                                    OperatorCall(
		                                        Operator(+),
		                                        List(Lookup(JSIdentifier(this),JSIdentifier(length)), JSIdentifier(num)))),
		                                        Lookup(JSIdentifier(this),JSIdentifier(num))))))))), 
		            (JSIdentifier(pushStack),
		                JSFunction(None,List(JSIdentifier(elems), JSIdentifier(name), JSIdentifier(selector)),List(Declare(JSIdentifier(ret)), Assign(JSIdentifier(ret),Call(Lookup(JSIdentifier(this),JSIdentifier(constructor)),List())), IfStatement(Call(Lookup(JSIdentifier(jQuery),JSIdentifier(isArray)),List(JSIdentifier(elems))),JSBlock(List(JSBlock(List(Call(Lookup(JSIdentifier(push),JSIdentifier(apply)),List(JSIdentifier(ret), JSIdentifier(elems))))))),Some(JSBlock(List(JSBlock(List(Call(Lookup(JSIdentifier(jQuery),JSIdentifier(merge)),List(JSIdentifier(ret), JSIdentifier(elems))))))))), Assign(Lookup(JSIdentifier(ret),JSIdentifier(prevObject)),JSIdentifier(this)), Assign(Lookup(JSIdentifier(ret),JSIdentifier(context)),Lookup(JSIdentifier(this),JSIdentifier(context))), IfStatement(OperatorCall(Operator(===),List(JSIdentifier(name), JSString(find))),JSBlock(List(JSBlock(List(Assign(Lookup(JSIdentifier(ret),JSIdentifier(selector)),OperatorCall(Operator(+),List(OperatorCall(Operator(+),List(Lookup(JSIdentifier(this),JSIdentifier(selector)), ConditionalExpression(Lookup(JSIdentifier(this),JSIdentifier(selector)),JSString( ),JSString()))), JSIdentifier(selector)))))))),Some(JSBlock(List(IfStatement(JSIdentifier(name),JSBlock(List(JSBlock(List(Assign(Lookup(JSIdentifier(ret),JSIdentifier(selector)),OperatorCall(Operator(+),List(OperatorCall(Operator(+),List(OperatorCall(Operator(+),List(OperatorCall(Operator(+),List(OperatorCall(Operator(+),List(Lookup(JSIdentifier(this),JSIdentifier(selector)), JSString(.))), JSIdentifier(name))), JSString(())), JSIdentifier(selector))), JSString())))))))),None))))), ReturnStatement(Some(JSIdentifier(ret)))))), (JSIdentifier(each),JSFunction(None,List(JSIdentifier(callback), JSIdentifier(args)),List(ReturnStatement(Some(Call(Lookup(JSIdentifier(jQuery),JSIdentifier(each)),List(JSIdentifier(this), JSIdentifier(callback), JSIdentifier(args)))))))), (JSIdentifier(ready),JSFunction(None,List(JSIdentifier(fn)),List(Call(Lookup(JSIdentifier(jQuery),JSIdentifier(bindReady)),List()), Call(Lookup(JSIdentifier(readyList),JSIdentifier(done)),List(JSIdentifier(fn))), ReturnStatement(Some(JSIdentifier(this)))))), (JSIdentifier(eq),JSFunction(None,List(JSIdentifier(i)),List(ReturnStatement(Some(ConditionalExpression(OperatorCall(Operator(===),List(JSIdentifier(i), OperatorCall(Operator(-),List(JSNumber(1))))),Call(Lookup(JSIdentifier(this),JSIdentifier(slice)),List(JSIdentifier(i))),Call(Lookup(JSIdentifier(this),JSIdentifier(slice)),List(JSIdentifier(i), OperatorCall(Operator(+),List(OperatorCall(Operator(+),List(JSIdentifier(i))), JSNumber(1))))))))))), (JSIdentifier(first),JSFunction(None,List(),List(ReturnStatement(Some(Call(Lookup(JSIdentifier(this),JSIdentifier(eq)),List(JSNumber(0)))))))), (JSIdentifier(last),JSFunction(None,List(),List(ReturnStatement(Some(Call(Lookup(JSIdentifier(this),JSIdentifier(eq)),List(OperatorCall(Operator(-),List(JSNumber(1)))))))))), (JSIdentifier(slice),JSFunction(None,List(),List(ReturnStatement(Some(Call(Lookup(JSIdentifier(this),JSIdentifier(pushStack)),List(Call(Lookup(JSIdentifier(slice),JSIdentifier(apply)),List(JSIdentifier(this), JSIdentifier(arguments))), JSString(slice), Call(Lookup(Call(Lookup(JSIdentifier(slice),JSIdentifier(call)),List(JSIdentifier(arguments))),JSIdentifier(join)),List(JSString(,)))))))))), (JSIdentifier(map),JSFunction(None,List(JSIdentifier(callback)),List(ReturnStatement(Some(Call(Lookup(JSIdentifier(this),JSIdentifier(pushStack)),List(Call(Lookup(JSIdentifier(jQuery),JSIdentifier(map)),List(JSIdentifier(this), JSFunction(None,List(JSIdentifier(elem), JSIdentifier(i)),List(ReturnStatement(Some(Call(Lookup(JSIdentifier(callback),JSIdentifier(call)),List(JSIdentifier(elem), JSIdentifier(i), JSIdentifier(elem)))))))))))))))), (JSIdentifier(end),JSFunction(None,List(),List(ReturnStatement(Some(OperatorCall(Operator(||),List(Lookup(JSIdentifier(this),JSIdentifier(prevObject)), Call(Lookup(JSIdentifier(this),JSIdentifier(constructor)),List(JSIdentifier(null)))))))))), (JSIdentifier(push),JSIdentifier(push)), (JSIdentifier(sort),Lookup(JSArrayLiteral(List()),JSIdentifier(sort))), (JSIdentifier(splice),Lookup(JSArrayLiteral(List()),JSIdentifier(splice)))))))))






O JSSource(List(AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(fn)), ApplyLookup(JSIdentifier(init)), ApplyLookup(JSIdentifier(prototype)))),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(fn))))), AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(extend)))),AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(fn)), ApplyLookup(JSIdentifier(extend)))),JSFunction(None,List(),List(VariableDeclarations(List(VariableDeclaration(JSIdentifier(options),None), VariableDeclaration(JSIdentifier(name),None), VariableDeclaration(JSIdentifier(src),None), VariableDeclaration(JSIdentifier(copy),None), VariableDeclaration(JSIdentifier(copyIsArray),None), VariableDeclaration(JSIdentifier(clone),None), VariableDeclaration(JSIdentifier(target),Some(BinaryExpression(CallExpression(0,JSIdentifier(arguments),List(ApplyLookup(JSNumber(0)))),List(BinaryExtension(Operator(||),JSLiteralObject(List())))))), VariableDeclaration(JSIdentifier(i),Some(JSNumber(1))), VariableDeclaration(JSIdentifier(length),Some(CallExpression(0,JSIdentifier(arguments),List(ApplyLookup(JSIdentifier(length)))))), VariableDeclaration(JSIdentifier(deep),Some(JSIdentifier(false))))), IfStatement(BinaryExpression(UnaryExpression(List(Operator(typeof)),JSIdentifier(target)),List(BinaryExtension(Operator(===),JSString(boolean)))),JSBlock(List(AssignmentExpression(Operator(=),JSIdentifier(deep),JSIdentifier(target)), AssignmentExpression(Operator(=),JSIdentifier(target),BinaryExpression(CallExpression(0,JSIdentifier(arguments),List(ApplyLookup(JSNumber(1)))),List(BinaryExtension(Operator(||),JSLiteralObject(List()))))), AssignmentExpression(Operator(=),JSIdentifier(i),JSNumber(2)))),None), IfStatement(BinaryExpression(BinaryExpression(UnaryExpression(List(Operator(typeof)),JSIdentifier(target)),List(BinaryExtension(Operator(!==),JSString(object)))),List(BinaryExtension(Operator(&&),UnaryExpression(List(Operator(!)),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(isFunction)), ApplyArguments(List(JSIdentifier(target))))))))),JSBlock(List(AssignmentExpression(Operator(=),JSIdentifier(target),JSLiteralObject(List())))),None), IfStatement(BinaryExpression(JSIdentifier(length),List(BinaryExtension(Operator(===),JSIdentifier(i)))),JSBlock(List(AssignmentExpression(Operator(=),JSIdentifier(target),JSIdentifier(this)), UnaryExpression(List(Operator(--)),JSIdentifier(i)))),None), ForStatement(None,ForSemicolonUpdate(Some(BinaryExpression(JSIdentifier(i),List(BinaryExtension(Operator(<),JSIdentifier(length))))),Some(PostfixExpression(JSIdentifier(i),Operator(++)))),JSBlock(List(IfStatement(BinaryExpression(AssignmentExpression(Operator(=),JSIdentifier(options),CallExpression(0,JSIdentifier(arguments),List(ApplyLookup(JSIdentifier(i))))),List(BinaryExtension(Operator(!=),JSIdentifier(null)))),JSBlock(List(ForStatement(Some(ForInit(JSIdentifier(name))),ForInUpdate(JSIdentifier(options)),JSBlock(List(AssignmentExpression(Operator(=),JSIdentifier(src),CallExpression(0,JSIdentifier(target),List(ApplyLookup(JSIdentifier(name))))), AssignmentExpression(Operator(=),JSIdentifier(copy),CallExpression(0,JSIdentifier(options),List(ApplyLookup(JSIdentifier(name))))), IfStatement(BinaryExpression(JSIdentifier(target),List(BinaryExtension(Operator(===),JSIdentifier(copy)))),JSBlock(List(ContinueStatement(None))),None), IfStatement(BinaryExpression(JSIdentifier(deep),List(BinaryExtension(Operator(&&),JSIdentifier(copy)), BinaryExtension(Operator(&&),BinaryExpression(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(isPlainObject)), ApplyArguments(List(JSIdentifier(copy))))),List(BinaryExtension(Operator(||),AssignmentExpression(Operator(=),JSIdentifier(copyIsArray),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(isArray)), ApplyArguments(List(JSIdentifier(copy)))))))))))),JSBlock(List(IfStatement(JSIdentifier(copyIsArray),JSBlock(List(AssignmentExpression(Operator(=),JSIdentifier(copyIsArray),JSIdentifier(false)), AssignmentExpression(Operator(=),JSIdentifier(clone),ConditionalExpression(BinaryExpression(JSIdentifier(src),List(BinaryExtension(Operator(&&),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(isArray)), ApplyArguments(List(JSIdentifier(src)))))))),JSIdentifier(src),JSArrayLiteral(List()))))),Some(JSBlock(List(AssignmentExpression(Operator(=),JSIdentifier(clone),ConditionalExpression(BinaryExpression(JSIdentifier(src),List(BinaryExtension(Operator(&&),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(isPlainObject)), ApplyArguments(List(JSIdentifier(src)))))))),JSIdentifier(src),JSLiteralObject(List()))))))), AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(target),List(ApplyLookup(JSIdentifier(name)))),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(extend)), ApplyArguments(List(JSIdentifier(deep), JSIdentifier(clone), JSIdentifier(copy)))))))),Some(IfStatement(BinaryExpression(JSIdentifier(copy),List(BinaryExtension(Operator(!==),JSIdentifier(undefined)))),JSBlock(List(AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(target),List(ApplyLookup(JSIdentifier(name)))),JSIdentifier(copy)))),None)))))))),None)))), ReturnStatement(Some(JSIdentifier(target)))))))))
N JSSource(List(Assign(Lookup(Lookup(Lookup(JSIdentifier(jQuery),JSIdentifier(fn)),JSIdentifier(init)),JSIdentifier(prototype)),Lookup(JSIdentifier(jQuery),JSIdentifier(fn))), Assign(Lookup(JSIdentifier(jQuery),JSIdentifier(extend)),Assign(Lookup(Lookup(JSIdentifier(jQuery),JSIdentifier(fn)),JSIdentifier(extend)),JSFunction(None,List(),List(Declare(JSIdentifier(options)), Declare(JSIdentifier(name)), Declare(JSIdentifier(src)), Declare(JSIdentifier(copy)), Declare(JSIdentifier(copyIsArray)), Declare(JSIdentifier(clone)), Declare(JSIdentifier(target)), Assign(JSIdentifier(target),OperatorCall(Operator(||),List(Lookup(JSIdentifier(arguments),JSNumber(0)), JSLiteralObject(List())))), Declare(JSIdentifier(i)), Assign(JSIdentifier(i),JSNumber(1)), Declare(JSIdentifier(length)), Assign(JSIdentifier(length),Lookup(JSIdentifier(arguments),JSIdentifier(length))), Declare(JSIdentifier(deep)), Assign(JSIdentifier(deep),JSIdentifier(false)), IfStatement(OperatorCall(Operator(===),List(OperatorCall(Operator(typeof),List(JSIdentifier(target))), JSString(boolean))),JSBlock(List(JSBlock(List(Assign(JSIdentifier(deep),JSIdentifier(target)), Assign(JSIdentifier(target),OperatorCall(Operator(||),List(Lookup(JSIdentifier(arguments),JSNumber(1)), JSLiteralObject(List())))), Assign(JSIdentifier(i),JSNumber(2)))))),None), IfStatement(OperatorCall(Operator(&&),List(OperatorCall(Operator(!==),List(OperatorCall(Operator(typeof),List(JSIdentifier(target))), JSString(object))), OperatorCall(Operator(!),List(Call(Lookup(JSIdentifier(jQuery),JSIdentifier(isFunction)),List(JSIdentifier(target))))))),JSBlock(List(JSBlock(List(Assign(JSIdentifier(target),JSLiteralObject(List())))))),None), IfStatement(OperatorCall(Operator(===),List(JSIdentifier(length), JSIdentifier(i))),JSBlock(List(JSBlock(List(Assign(JSIdentifier(target),JSIdentifier(this)), OperatorCall(Operator(--),List(JSIdentifier(i))))))),None), While(OperatorCall(Operator(<),List(JSIdentifier(i), JSIdentifier(length))),JSBlock(List(JSBlock(List(JSBlock(List(IfStatement(OperatorCall(Operator(!=),List(Assign(JSIdentifier(options),Lookup(JSIdentifier(arguments),JSIdentifier(i))), JSIdentifier(null))),JSBlock(List(JSBlock(List(ForIn(JSBlock(List(JSIdentifier(name))),JSIdentifier(options),JSBlock(List(AssignmentExpression(Operator(=),JSIdentifier(src),CallExpression(0,JSIdentifier(target),List(ApplyLookup(JSIdentifier(name))))), AssignmentExpression(Operator(=),JSIdentifier(copy),CallExpression(0,JSIdentifier(options),List(ApplyLookup(JSIdentifier(name))))), IfStatement(BinaryExpression(JSIdentifier(target),List(BinaryExtension(Operator(===),JSIdentifier(copy)))),JSBlock(List(ContinueStatement(None))),None), IfStatement(BinaryExpression(JSIdentifier(deep),List(BinaryExtension(Operator(&&),JSIdentifier(copy)), BinaryExtension(Operator(&&),BinaryExpression(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(isPlainObject)), ApplyArguments(List(JSIdentifier(copy))))),List(BinaryExtension(Operator(||),AssignmentExpression(Operator(=),JSIdentifier(copyIsArray),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(isArray)), ApplyArguments(List(JSIdentifier(copy)))))))))))),JSBlock(List(IfStatement(JSIdentifier(copyIsArray),JSBlock(List(AssignmentExpression(Operator(=),JSIdentifier(copyIsArray),JSIdentifier(false)), AssignmentExpression(Operator(=),JSIdentifier(clone),ConditionalExpression(BinaryExpression(JSIdentifier(src),List(BinaryExtension(Operator(&&),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(isArray)), ApplyArguments(List(JSIdentifier(src)))))))),JSIdentifier(src),JSArrayLiteral(List()))))),Some(JSBlock(List(AssignmentExpression(Operator(=),JSIdentifier(clone),ConditionalExpression(BinaryExpression(JSIdentifier(src),List(BinaryExtension(Operator(&&),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(isPlainObject)), ApplyArguments(List(JSIdentifier(src)))))))),JSIdentifier(src),JSLiteralObject(List()))))))), AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(target),List(ApplyLookup(JSIdentifier(name)))),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(extend)), ApplyArguments(List(JSIdentifier(deep), JSIdentifier(clone), JSIdentifier(copy)))))))),Some(IfStatement(BinaryExpression(JSIdentifier(copy),List(BinaryExtension(Operator(!==),JSIdentifier(undefined)))),JSBlock(List(AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(target),List(ApplyLookup(JSIdentifier(name)))),JSIdentifier(copy)))),None)))))))))),None))), PostfixExpression(JSIdentifier(i),Operator(++))))))), ReturnStatement(Some(JSIdentifier(target)))))))))

O JSSource(List(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(extend)), ApplyArguments(List(JSLiteralObject(List((JSIdentifier(noConflict),JSFunction(None,List(JSIdentifier(deep)),List(IfStatement(BinaryExpression(CallExpression(0,JSIdentifier(window),List(ApplyLookup(JSIdentifier($)))),List(BinaryExtension(Operator(===),JSIdentifier(jQuery)))),JSBlock(List(AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(window),List(ApplyLookup(JSIdentifier($)))),JSIdentifier(_$)))),None), IfStatement(BinaryExpression(JSIdentifier(deep),List(BinaryExtension(Operator(&&),BinaryExpression(CallExpression(0,JSIdentifier(window),List(ApplyLookup(JSIdentifier(jQuery)))),List(BinaryExtension(Operator(===),JSIdentifier(jQuery))))))),JSBlock(List(AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(window),List(ApplyLookup(JSIdentifier(jQuery)))),JSIdentifier(_jQuery)))),None), ReturnStatement(Some(JSIdentifier(jQuery)))))), (JSIdentifier(isReady),JSIdentifier(false)), (JSIdentifier(readyWait),JSNumber(1)), (JSIdentifier(holdReady),JSFunction(None,List(JSIdentifier(hold)),List(IfStatement(JSIdentifier(hold),JSBlock(List(PostfixExpression(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(readyWait)))),Operator(++)))),Some(JSBlock(List(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(ready)), ApplyArguments(List(JSIdentifier(true)))))))))))), (JSIdentifier(ready),JSFunction(None,List(JSIdentifier(wait)),List(IfStatement(BinaryExpression(BinaryExpression(BinaryExpression(JSIdentifier(wait),List(BinaryExtension(Operator(===),JSIdentifier(true)))),List(BinaryExtension(Operator(&&),UnaryExpression(List(Operator(!), Operator(--)),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(readyWait)))))))),List(BinaryExtension(Operator(||),BinaryExpression(BinaryExpression(JSIdentifier(wait),List(BinaryExtension(Operator(!==),JSIdentifier(true)))),List(BinaryExtension(Operator(&&),UnaryExpression(List(Operator(!)),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(isReady))))))))))),JSBlock(List(IfStatement(UnaryExpression(List(Operator(!)),CallExpression(0,JSIdentifier(document),List(ApplyLookup(JSIdentifier(body))))),JSBlock(List(ReturnStatement(Some(CallExpression(0,JSIdentifier(setTimeout),List(ApplyArguments(List(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(ready)))), JSNumber(1))))))))),None), AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(isReady)))),JSIdentifier(true)), IfStatement(BinaryExpression(BinaryExpression(JSIdentifier(wait),List(BinaryExtension(Operator(!==),JSIdentifier(true)))),List(BinaryExtension(Operator(&&),BinaryExpression(UnaryExpression(List(Operator(--)),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(readyWait))))),List(BinaryExtension(Operator(>),JSNumber(0))))))),JSBlock(List(ReturnStatement(None))),None), CallExpression(0,JSIdentifier(readyList),List(ApplyLookup(JSIdentifier(resolveWith)), ApplyArguments(List(JSIdentifier(document), JSArrayLiteral(List(Some(JSIdentifier(jQuery)))))))), IfStatement(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(fn)), ApplyLookup(JSIdentifier(trigger)))),JSBlock(List(CallExpression(0,JSIdentifier(jQuery),List(ApplyArguments(List(JSIdentifier(document))), ApplyLookup(JSIdentifier(trigger)), ApplyArguments(List(JSString(ready))), ApplyLookup(JSIdentifier(unbind)), ApplyArguments(List(JSString(ready))))))),None))),None)))), (JSIdentifier(bindReady),JSFunction(None,List(),List(IfStatement(JSIdentifier(readyList),JSBlock(List(ReturnStatement(None))),None), AssignmentExpression(Operator(=),JSIdentifier(readyList),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(_Deferred)), ApplyArguments(List())))), IfStatement(BinaryExpression(CallExpression(0,JSIdentifier(document),List(ApplyLookup(JSIdentifier(readyState)))),List(BinaryExtension(Operator(===),JSString(complete)))),JSBlock(List(ReturnStatement(Some(CallExpression(0,JSIdentifier(setTimeout),List(ApplyArguments(List(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(ready)))), JSNumber(1))))))))),None), IfStatement(CallExpression(0,JSIdentifier(document),List(ApplyLookup(JSIdentifier(addEventListener)))),JSBlock(List(CallExpression(0,JSIdentifier(document),List(ApplyLookup(JSIdentifier(addEventListener)), ApplyArguments(List(JSString(DOMContentLoaded), JSIdentifier(DOMContentLoaded), JSIdentifier(false))))), CallExpression(0,JSIdentifier(window),List(ApplyLookup(JSIdentifier(addEventListener)), ApplyArguments(List(JSString(load), CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(ready)))), JSIdentifier(false))))))),Some(IfStatement(CallExpression(0,JSIdentifier(document),List(ApplyLookup(JSIdentifier(attachEvent)))),JSBlock(List(CallExpression(0,JSIdentifier(document),List(ApplyLookup(JSIdentifier(attachEvent)), ApplyArguments(List(JSString(onreadystatechange), JSIdentifier(DOMContentLoaded))))), CallExpression(0,JSIdentifier(window),List(ApplyLookup(JSIdentifier(attachEvent)), ApplyArguments(List(JSString(onload), CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(ready)))))))), VariableDeclarations(List(VariableDeclaration(JSIdentifier(toplevel),Some(JSIdentifier(false))))), TryStatement(JSBlock(List(AssignmentExpression(Operator(=),JSIdentifier(toplevel),BinaryExpression(CallExpression(0,JSIdentifier(window),List(ApplyLookup(JSIdentifier(frameElement)))),List(BinaryExtension(Operator(==),JSIdentifier(null))))))),TryTail(Some(JSIdentifier(e)),Some(JSBlock(List())),None)), IfStatement(BinaryExpression(CallExpression(0,JSIdentifier(document),List(ApplyLookup(JSIdentifier(documentElement)), ApplyLookup(JSIdentifier(doScroll)))),List(BinaryExtension(Operator(&&),JSIdentifier(toplevel)))),JSBlock(List(CallExpression(0,JSIdentifier(doScrollCheck),List(ApplyArguments(List()))))),None))),None)))))), (JSIdentifier(isFunction),JSFunction(None,List(JSIdentifier(obj)),List(ReturnStatement(Some(BinaryExpression(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(type)), ApplyArguments(List(JSIdentifier(obj))))),List(BinaryExtension(Operator(===),JSString(function))))))))), (JSIdentifier(isArray),BinaryExpression(CallExpression(0,JSIdentifier(Array),List(ApplyLookup(JSIdentifier(isArray)))),List(BinaryExtension(Operator(||),JSFunction(None,List(JSIdentifier(obj)),List(ReturnStatement(Some(BinaryExpression(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(type)), ApplyArguments(List(JSIdentifier(obj))))),List(BinaryExtension(Operator(===),JSString(array)))))))))))), (JSIdentifier(isWindow),JSFunction(None,List(JSIdentifier(obj)),List(ReturnStatement(Some(BinaryExpression(JSIdentifier(obj),List(BinaryExtension(Operator(&&),BinaryExpression(UnaryExpression(List(Operator(typeof)),JSIdentifier(obj)),List(BinaryExtension(Operator(===),JSString(object))))), BinaryExtension(Operator(&&),BinaryExpression(JSString(setInterval),List(BinaryExtension(Operator(in),JSIdentifier(obj)))))))))))), (JSIdentifier(isNaN),JSFunction(None,List(JSIdentifier(obj)),List(ReturnStatement(Some(BinaryExpression(BinaryExpression(JSIdentifier(obj),List(BinaryExtension(Operator(==),JSIdentifier(null)))),List(BinaryExtension(Operator(||),UnaryExpression(List(Operator(!)),CallExpression(0,JSIdentifier(rdigit),List(ApplyLookup(JSIdentifier(test)), ApplyArguments(List(JSIdentifier(obj))))))), BinaryExtension(Operator(||),CallExpression(0,JSIdentifier(isNaN),List(ApplyArguments(List(JSIdentifier(obj))))))))))))), (JSIdentifier(type),JSFunction(None,List(JSIdentifier(obj)),List(ReturnStatement(Some(ConditionalExpression(BinaryExpression(JSIdentifier(obj),List(BinaryExtension(Operator(==),JSIdentifier(null)))),CallExpression(0,JSIdentifier(String),List(ApplyArguments(List(JSIdentifier(obj))))),BinaryExpression(CallExpression(0,JSIdentifier(class2type),List(ApplyLookup(CallExpression(0,JSIdentifier(toString),List(ApplyLookup(JSIdentifier(call)), ApplyArguments(List(JSIdentifier(obj)))))))),List(BinaryExtension(Operator(||),JSString(object)))))))))), (JSIdentifier(isPlainObject),JSFunction(None,List(JSIdentifier(obj)),List(IfStatement(BinaryExpression(UnaryExpression(List(Operator(!)),JSIdentifier(obj)),List(BinaryExtension(Operator(||),BinaryExpression(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(type)), ApplyArguments(List(JSIdentifier(obj))))),List(BinaryExtension(Operator(!==),JSString(object))))), BinaryExtension(Operator(||),CallExpression(0,JSIdentifier(obj),List(ApplyLookup(JSIdentifier(nodeType))))), BinaryExtension(Operator(||),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(isWindow)), ApplyArguments(List(JSIdentifier(obj)))))))),JSBlock(List(ReturnStatement(Some(JSIdentifier(false))))),None), IfStatement(BinaryExpression(CallExpression(0,JSIdentifier(obj),List(ApplyLookup(JSIdentifier(constructor)))),List(BinaryExtension(Operator(&&),UnaryExpression(List(Operator(!)),CallExpression(0,JSIdentifier(hasOwn),List(ApplyLookup(JSIdentifier(call)), ApplyArguments(List(JSIdentifier(obj), JSString(constructor))))))), BinaryExtension(Operator(&&),UnaryExpression(List(Operator(!)),CallExpression(0,JSIdentifier(hasOwn),List(ApplyLookup(JSIdentifier(call)), ApplyArguments(List(CallExpression(0,JSIdentifier(obj),List(ApplyLookup(JSIdentifier(constructor)), ApplyLookup(JSIdentifier(prototype)))), JSString(isPrototypeOf))))))))),JSBlock(List(ReturnStatement(Some(JSIdentifier(false))))),None), VariableDeclarations(List(VariableDeclaration(JSIdentifier(key),None))), ForStatement(Some(ForInit(JSIdentifier(key))),ForInUpdate(JSIdentifier(obj)),JSBlock(List())), ReturnStatement(Some(BinaryExpression(BinaryExpression(JSIdentifier(key),List(BinaryExtension(Operator(===),JSIdentifier(undefined)))),List(BinaryExtension(Operator(||),CallExpression(0,JSIdentifier(hasOwn),List(ApplyLookup(JSIdentifier(call)), ApplyArguments(List(JSIdentifier(obj), JSIdentifier(key))))))))))))), (JSIdentifier(isEmptyObject),JSFunction(None,List(JSIdentifier(obj)),List(ForStatement(Some(ForInit(VariableDeclarations(List(VariableDeclaration(JSIdentifier(name),None))))),ForInUpdate(JSIdentifier(obj)),JSBlock(List(ReturnStatement(Some(JSIdentifier(false)))))), ReturnStatement(Some(JSIdentifier(true)))))), (JSIdentifier(error),JSFunction(None,List(JSIdentifier(msg)),List(ThrowStatement(JSIdentifier(msg))))), (JSIdentifier(parseJSON),JSFunction(None,List(JSIdentifier(data)),List(IfStatement(BinaryExpression(BinaryExpression(UnaryExpression(List(Operator(typeof)),JSIdentifier(data)),List(BinaryExtension(Operator(!==),JSString(string)))),List(BinaryExtension(Operator(||),UnaryExpression(List(Operator(!)),JSIdentifier(data))))),JSBlock(List(ReturnStatement(Some(JSIdentifier(null))))),None), AssignmentExpression(Operator(=),JSIdentifier(data),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(trim)), ApplyArguments(List(JSIdentifier(data)))))), IfStatement(BinaryExpression(CallExpression(0,JSIdentifier(window),List(ApplyLookup(JSIdentifier(JSON)))),List(BinaryExtension(Operator(&&),CallExpression(0,JSIdentifier(window),List(ApplyLookup(JSIdentifier(JSON)), ApplyLookup(JSIdentifier(parse))))))),JSBlock(List(ReturnStatement(Some(CallExpression(0,JSIdentifier(window),List(ApplyLookup(JSIdentifier(JSON)), ApplyLookup(JSIdentifier(parse)), ApplyArguments(List(JSIdentifier(data))))))))),None), IfStatement(CallExpression(0,JSIdentifier(rvalidchars),List(ApplyLookup(JSIdentifier(test)), ApplyArguments(List(CallExpression(0,JSIdentifier(data),List(ApplyLookup(JSIdentifier(replace)), ApplyArguments(List(JSIdentifier(rvalidescape), JSString(@))), ApplyLookup(JSIdentifier(replace)), ApplyArguments(List(JSIdentifier(rvalidtokens), JSString(]))), ApplyLookup(JSIdentifier(replace)), ApplyArguments(List(JSIdentifier(rvalidbraces), JSString())))))))),JSBlock(List(ReturnStatement(Some(CallExpression(0,CallExpression(1,JSIdentifier(Function),List(ApplyArguments(List(BinaryExpression(JSString(return ),List(BinaryExtension(Operator(+),JSIdentifier(data)))))))),List(ApplyArguments(List()))))))),None), CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(error)), ApplyArguments(List(BinaryExpression(JSString(Invalid JSON: ),List(BinaryExtension(Operator(+),JSIdentifier(data))))))))))), (JSIdentifier(parseXML),JSFunction(None,List(JSIdentifier(data), JSIdentifier(xml), JSIdentifier(tmp)),List(IfStatement(CallExpression(0,JSIdentifier(window),List(ApplyLookup(JSIdentifier(DOMParser)))),JSBlock(List(AssignmentExpression(Operator(=),JSIdentifier(tmp),CallExpression(1,JSIdentifier(DOMParser),List(ApplyArguments(List())))), AssignmentExpression(Operator(=),JSIdentifier(xml),CallExpression(0,JSIdentifier(tmp),List(ApplyLookup(JSIdentifier(parseFromString)), ApplyArguments(List(JSIdentifier(data), JSString(text/xml)))))))),Some(JSBlock(List(AssignmentExpression(Operator(=),JSIdentifier(xml),CallExpression(1,JSIdentifier(ActiveXObject),List(ApplyArguments(List(JSString(Microsoft.XMLDOM)))))), AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(xml),List(ApplyLookup(JSIdentifier(async)))),JSString(false)), CallExpression(0,JSIdentifier(xml),List(ApplyLookup(JSIdentifier(loadXML)), ApplyArguments(List(JSIdentifier(data))))))))), AssignmentExpression(Operator(=),JSIdentifier(tmp),CallExpression(0,JSIdentifier(xml),List(ApplyLookup(JSIdentifier(documentElement))))), IfStatement(BinaryExpression(UnaryExpression(List(Operator(!)),JSIdentifier(tmp)),List(BinaryExtension(Operator(||),UnaryExpression(List(Operator(!)),CallExpression(0,JSIdentifier(tmp),List(ApplyLookup(JSIdentifier(nodeName)))))), BinaryExtension(Operator(||),BinaryExpression(CallExpression(0,JSIdentifier(tmp),List(ApplyLookup(JSIdentifier(nodeName)))),List(BinaryExtension(Operator(===),JSString(parsererror))))))),JSBlock(List(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(error)), ApplyArguments(List(BinaryExpression(JSString(Invalid XML: ),List(BinaryExtension(Operator(+),JSIdentifier(data)))))))))),None), ReturnStatement(Some(JSIdentifier(xml)))))), (JSIdentifier(noop),JSFunction(None,List(),List())), (JSIdentifier(globalEval),JSFunction(None,List(JSIdentifier(data)),List(IfStatement(BinaryExpression(JSIdentifier(data),List(BinaryExtension(Operator(&&),CallExpression(0,JSIdentifier(rnotwhite),List(ApplyLookup(JSIdentifier(test)), ApplyArguments(List(JSIdentifier(data)))))))),JSBlock(List(CallExpression(0,BinaryExpression(CallExpression(0,JSIdentifier(window),List(ApplyLookup(JSIdentifier(execScript)))),List(BinaryExtension(Operator(||),JSFunction(None,List(JSIdentifier(data)),List(CallExpression(0,JSIdentifier(window),List(ApplyLookup(JSString(eval)), ApplyLookup(JSIdentifier(call)), ApplyArguments(List(JSIdentifier(window), JSIdentifier(data)))))))))),List(ApplyArguments(List(JSIdentifier(data))))))),None)))), (JSIdentifier(camelCase),JSFunction(None,List(JSIdentifier(string)),List(ReturnStatement(Some(CallExpression(0,JSIdentifier(string),List(ApplyLookup(JSIdentifier(replace)), ApplyArguments(List(JSIdentifier(rdashAlpha), JSIdentifier(fcamelCase)))))))))), (JSIdentifier(nodeName),JSFunction(None,List(JSIdentifier(elem), JSIdentifier(name)),List(ReturnStatement(Some(BinaryExpression(CallExpression(0,JSIdentifier(elem),List(ApplyLookup(JSIdentifier(nodeName)))),List(BinaryExtension(Operator(&&),BinaryExpression(CallExpression(0,JSIdentifier(elem),List(ApplyLookup(JSIdentifier(nodeName)), ApplyLookup(JSIdentifier(toUpperCase)), ApplyArguments(List()))),List(BinaryExtension(Operator(===),CallExpression(0,JSIdentifier(name),List(ApplyLookup(JSIdentifier(toUpperCase)), ApplyArguments(List())))))))))))))), (JSIdentifier(each),JSFunction(None,List(JSIdentifier(object), JSIdentifier(callback), JSIdentifier(args)),List(VariableDeclarations(List(VariableDeclaration(JSIdentifier(name),None), VariableDeclaration(JSIdentifier(i),Some(JSNumber(0))), VariableDeclaration(JSIdentifier(length),Some(CallExpression(0,JSIdentifier(object),List(ApplyLookup(JSIdentifier(length)))))), VariableDeclaration(JSIdentifier(isObj),Some(BinaryExpression(BinaryExpression(JSIdentifier(length),List(BinaryExtension(Operator(===),JSIdentifier(undefined)))),List(BinaryExtension(Operator(||),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(isFunction)), ApplyArguments(List(JSIdentifier(object)))))))))))), IfStatement(JSIdentifier(args),JSBlock(List(IfStatement(JSIdentifier(isObj),JSBlock(List(ForStatement(Some(ForInit(JSIdentifier(name))),ForInUpdate(JSIdentifier(object)),JSBlock(List(IfStatement(BinaryExpression(CallExpression(0,JSIdentifier(callback),List(ApplyLookup(JSIdentifier(apply)), ApplyArguments(List(CallExpression(0,JSIdentifier(object),List(ApplyLookup(JSIdentifier(name)))), JSIdentifier(args))))),List(BinaryExtension(Operator(===),JSIdentifier(false)))),JSBlock(List(BreakStatement(None))),None)))))),Some(JSBlock(List(ForStatement(None,ForSemicolonUpdate(Some(BinaryExpression(JSIdentifier(i),List(BinaryExtension(Operator(<),JSIdentifier(length))))),None),JSBlock(List(IfStatement(BinaryExpression(CallExpression(0,JSIdentifier(callback),List(ApplyLookup(JSIdentifier(apply)), ApplyArguments(List(CallExpression(0,JSIdentifier(object),List(ApplyLookup(PostfixExpression(JSIdentifier(i),Operator(++))))), JSIdentifier(args))))),List(BinaryExtension(Operator(===),JSIdentifier(false)))),JSBlock(List(BreakStatement(None))),None)))))))))),Some(JSBlock(List(IfStatement(JSIdentifier(isObj),JSBlock(List(ForStatement(Some(ForInit(JSIdentifier(name))),ForInUpdate(JSIdentifier(object)),JSBlock(List(IfStatement(BinaryExpression(CallExpression(0,JSIdentifier(callback),List(ApplyLookup(JSIdentifier(call)), ApplyArguments(List(CallExpression(0,JSIdentifier(object),List(ApplyLookup(JSIdentifier(name)))), JSIdentifier(name), CallExpression(0,JSIdentifier(object),List(ApplyLookup(JSIdentifier(name)))))))),List(BinaryExtension(Operator(===),JSIdentifier(false)))),JSBlock(List(BreakStatement(None))),None)))))),Some(JSBlock(List(ForStatement(None,ForSemicolonUpdate(Some(BinaryExpression(JSIdentifier(i),List(BinaryExtension(Operator(<),JSIdentifier(length))))),None),JSBlock(List(IfStatement(BinaryExpression(CallExpression(0,JSIdentifier(callback),List(ApplyLookup(JSIdentifier(call)), ApplyArguments(List(CallExpression(0,JSIdentifier(object),List(ApplyLookup(JSIdentifier(i)))), JSIdentifier(i), CallExpression(0,JSIdentifier(object),List(ApplyLookup(PostfixExpression(JSIdentifier(i),Operator(++))))))))),List(BinaryExtension(Operator(===),JSIdentifier(false)))),JSBlock(List(BreakStatement(None))),None)))))))))))), ReturnStatement(Some(JSIdentifier(object)))))), (JSIdentifier(trim),ConditionalExpression(JSIdentifier(trim),JSFunction(None,List(JSIdentifier(text)),List(ReturnStatement(Some(ConditionalExpression(BinaryExpression(JSIdentifier(text),List(BinaryExtension(Operator(==),JSIdentifier(null)))),JSString(),CallExpression(0,JSIdentifier(trim),List(ApplyLookup(JSIdentifier(call)), ApplyArguments(List(JSIdentifier(text)))))))))),JSFunction(None,List(JSIdentifier(text)),List(ReturnStatement(Some(ConditionalExpression(BinaryExpression(JSIdentifier(text),List(BinaryExtension(Operator(==),JSIdentifier(null)))),JSString(),CallExpression(0,JSIdentifier(text),List(ApplyLookup(JSIdentifier(toString)), ApplyArguments(List()), ApplyLookup(JSIdentifier(replace)), ApplyArguments(List(JSIdentifier(trimLeft), JSString())), ApplyLookup(JSIdentifier(replace)), ApplyArguments(List(JSIdentifier(trimRight), JSString()))))))))))), (JSIdentifier(makeArray),JSFunction(None,List(JSIdentifier(array), JSIdentifier(results)),List(VariableDeclarations(List(VariableDeclaration(JSIdentifier(ret),Some(BinaryExpression(JSIdentifier(results),List(BinaryExtension(Operator(||),JSArrayLiteral(List())))))))), IfStatement(BinaryExpression(JSIdentifier(array),List(BinaryExtension(Operator(!=),JSIdentifier(null)))),JSBlock(List(VariableDeclarations(List(VariableDeclaration(JSIdentifier(type),Some(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(type)), ApplyArguments(List(JSIdentifier(array))))))))), IfStatement(BinaryExpression(BinaryExpression(CallExpression(0,JSIdentifier(array),List(ApplyLookup(JSIdentifier(length)))),List(BinaryExtension(Operator(==),JSIdentifier(null)))),List(BinaryExtension(Operator(||),BinaryExpression(JSIdentifier(type),List(BinaryExtension(Operator(===),JSString(string))))), BinaryExtension(Operator(||),BinaryExpression(JSIdentifier(type),List(BinaryExtension(Operator(===),JSString(function))))), BinaryExtension(Operator(||),BinaryExpression(JSIdentifier(type),List(BinaryExtension(Operator(===),JSString(regexp))))), BinaryExtension(Operator(||),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(isWindow)), ApplyArguments(List(JSIdentifier(array)))))))),JSBlock(List(CallExpression(0,JSIdentifier(push),List(ApplyLookup(JSIdentifier(call)), ApplyArguments(List(JSIdentifier(ret), JSIdentifier(array))))))),Some(JSBlock(List(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(merge)), ApplyArguments(List(JSIdentifier(ret), JSIdentifier(array))))))))))),None), ReturnStatement(Some(JSIdentifier(ret)))))), (JSIdentifier(inArray),JSFunction(None,List(JSIdentifier(elem), JSIdentifier(array)),List(IfStatement(JSIdentifier(indexOf),JSBlock(List(ReturnStatement(Some(CallExpression(0,JSIdentifier(indexOf),List(ApplyLookup(JSIdentifier(call)), ApplyArguments(List(JSIdentifier(array), JSIdentifier(elem))))))))),None), ForStatement(Some(ForInit(VariableDeclarations(List(VariableDeclaration(JSIdentifier(i),Some(JSNumber(0))), VariableDeclaration(JSIdentifier(length),Some(CallExpression(0,JSIdentifier(array),List(ApplyLookup(JSIdentifier(length)))))))))),ForSemicolonUpdate(Some(BinaryExpression(JSIdentifier(i),List(BinaryExtension(Operator(<),JSIdentifier(length))))),Some(PostfixExpression(JSIdentifier(i),Operator(++)))),JSBlock(List(IfStatement(BinaryExpression(CallExpression(0,JSIdentifier(array),List(ApplyLookup(JSIdentifier(i)))),List(BinaryExtension(Operator(===),JSIdentifier(elem)))),JSBlock(List(ReturnStatement(Some(JSIdentifier(i))))),None)))), ReturnStatement(Some(UnaryExpression(List(Operator(-)),JSNumber(1))))))), (JSIdentifier(merge),JSFunction(None,List(JSIdentifier(first), JSIdentifier(second)),List(VariableDeclarations(List(VariableDeclaration(JSIdentifier(i),Some(CallExpression(0,JSIdentifier(first),List(ApplyLookup(JSIdentifier(length)))))), VariableDeclaration(JSIdentifier(j),Some(JSNumber(0))))), IfStatement(BinaryExpression(UnaryExpression(List(Operator(typeof)),CallExpression(0,JSIdentifier(second),List(ApplyLookup(JSIdentifier(length))))),List(BinaryExtension(Operator(===),JSString(number)))),JSBlock(List(ForStatement(Some(ForInit(VariableDeclarations(List(VariableDeclaration(JSIdentifier(l),Some(CallExpression(0,JSIdentifier(second),List(ApplyLookup(JSIdentifier(length)))))))))),ForSemicolonUpdate(Some(BinaryExpression(JSIdentifier(j),List(BinaryExtension(Operator(<),JSIdentifier(l))))),Some(PostfixExpression(JSIdentifier(j),Operator(++)))),JSBlock(List(AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(first),List(ApplyLookup(PostfixExpression(JSIdentifier(i),Operator(++))))),CallExpression(0,JSIdentifier(second),List(ApplyLookup(JSIdentifier(j)))))))))),Some(JSBlock(List(While(BinaryExpression(CallExpression(0,JSIdentifier(second),List(ApplyLookup(JSIdentifier(j)))),List(BinaryExtension(Operator(!==),JSIdentifier(undefined)))),JSBlock(List(AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(first),List(ApplyLookup(PostfixExpression(JSIdentifier(i),Operator(++))))),CallExpression(0,JSIdentifier(second),List(ApplyLookup(PostfixExpression(JSIdentifier(j),Operator(++))))))))))))), AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(first),List(ApplyLookup(JSIdentifier(length)))),JSIdentifier(i)), ReturnStatement(Some(JSIdentifier(first)))))), (JSIdentifier(grep),JSFunction(None,List(JSIdentifier(elems), JSIdentifier(callback), JSIdentifier(inv)),List(VariableDeclarations(List(VariableDeclaration(JSIdentifier(ret),Some(JSArrayLiteral(List()))), VariableDeclaration(JSIdentifier(retVal),None))), AssignmentExpression(Operator(=),JSIdentifier(inv),UnaryExpression(List(Operator(!), Operator(!)),JSIdentifier(inv))), ForStatement(Some(ForInit(VariableDeclarations(List(VariableDeclaration(JSIdentifier(i),Some(JSNumber(0))), VariableDeclaration(JSIdentifier(length),Some(CallExpression(0,JSIdentifier(elems),List(ApplyLookup(JSIdentifier(length)))))))))),ForSemicolonUpdate(Some(BinaryExpression(JSIdentifier(i),List(BinaryExtension(Operator(<),JSIdentifier(length))))),Some(PostfixExpression(JSIdentifier(i),Operator(++)))),JSBlock(List(AssignmentExpression(Operator(=),JSIdentifier(retVal),UnaryExpression(List(Operator(!), Operator(!)),CallExpression(0,JSIdentifier(callback),List(ApplyArguments(List(CallExpression(0,JSIdentifier(elems),List(ApplyLookup(JSIdentifier(i)))), JSIdentifier(i))))))), IfStatement(BinaryExpression(JSIdentifier(inv),List(BinaryExtension(Operator(!==),JSIdentifier(retVal)))),JSBlock(List(CallExpression(0,JSIdentifier(ret),List(ApplyLookup(JSIdentifier(push)), ApplyArguments(List(CallExpression(0,JSIdentifier(elems),List(ApplyLookup(JSIdentifier(i)))))))))),None)))), ReturnStatement(Some(JSIdentifier(ret)))))), (JSIdentifier(map),JSFunction(None,List(JSIdentifier(elems), JSIdentifier(callback), JSIdentifier(arg)),List(VariableDeclarations(List(VariableDeclaration(JSIdentifier(value),None), VariableDeclaration(JSIdentifier(key),None), VariableDeclaration(JSIdentifier(ret),Some(JSArrayLiteral(List()))), VariableDeclaration(JSIdentifier(i),Some(JSNumber(0))), VariableDeclaration(JSIdentifier(length),Some(CallExpression(0,JSIdentifier(elems),List(ApplyLookup(JSIdentifier(length)))))), VariableDeclaration(JSIdentifier(isArray),Some(BinaryExpression(BinaryExpression(JSIdentifier(elems),List(BinaryExtension(Operator(instanceof),JSIdentifier(jQuery)))),List(BinaryExtension(Operator(||),BinaryExpression(BinaryExpression(JSIdentifier(length),List(BinaryExtension(Operator(!==),JSIdentifier(undefined)))),List(BinaryExtension(Operator(&&),BinaryExpression(UnaryExpression(List(Operator(typeof)),JSIdentifier(length)),List(BinaryExtension(Operator(===),JSString(number))))), BinaryExtension(Operator(&&),BinaryExpression(BinaryExpression(BinaryExpression(JSIdentifier(length),List(BinaryExtension(Operator(>),JSNumber(0)))),List(BinaryExtension(Operator(&&),CallExpression(0,JSIdentifier(elems),List(ApplyLookup(JSNumber(0))))), BinaryExtension(Operator(&&),CallExpression(0,JSIdentifier(elems),List(ApplyLookup(BinaryExpression(JSIdentifier(length),List(BinaryExtension(Operator(-),JSNumber(1)))))))))),List(BinaryExtension(Operator(||),BinaryExpression(JSIdentifier(length),List(BinaryExtension(Operator(===),JSNumber(0))))), BinaryExtension(Operator(||),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(isArray)), ApplyArguments(List(JSIdentifier(elems)))))))))))))))))), IfStatement(JSIdentifier(isArray),JSBlock(List(ForStatement(None,ForSemicolonUpdate(Some(BinaryExpression(JSIdentifier(i),List(BinaryExtension(Operator(<),JSIdentifier(length))))),Some(PostfixExpression(JSIdentifier(i),Operator(++)))),JSBlock(List(AssignmentExpression(Operator(=),JSIdentifier(value),CallExpression(0,JSIdentifier(callback),List(ApplyArguments(List(CallExpression(0,JSIdentifier(elems),List(ApplyLookup(JSIdentifier(i)))), JSIdentifier(i), JSIdentifier(arg)))))), IfStatement(BinaryExpression(JSIdentifier(value),List(BinaryExtension(Operator(!=),JSIdentifier(null)))),JSBlock(List(AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(ret),List(ApplyLookup(CallExpression(0,JSIdentifier(ret),List(ApplyLookup(JSIdentifier(length))))))),JSIdentifier(value)))),None)))))),Some(JSBlock(List(ForStatement(Some(ForInit(JSIdentifier(key))),ForInUpdate(JSIdentifier(elems)),JSBlock(List(AssignmentExpression(Operator(=),JSIdentifier(value),CallExpression(0,JSIdentifier(callback),List(ApplyArguments(List(CallExpression(0,JSIdentifier(elems),List(ApplyLookup(JSIdentifier(key)))), JSIdentifier(key), JSIdentifier(arg)))))), IfStatement(BinaryExpression(JSIdentifier(value),List(BinaryExtension(Operator(!=),JSIdentifier(null)))),JSBlock(List(AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(ret),List(ApplyLookup(CallExpression(0,JSIdentifier(ret),List(ApplyLookup(JSIdentifier(length))))))),JSIdentifier(value)))),None)))))))), ReturnStatement(Some(CallExpression(0,JSIdentifier(ret),List(ApplyLookup(JSIdentifier(concat)), ApplyLookup(JSIdentifier(apply)), ApplyArguments(List(JSArrayLiteral(List()), JSIdentifier(ret)))))))))), (JSIdentifier(guid),JSNumber(1)), (JSIdentifier(proxy),JSFunction(None,List(JSIdentifier(fn), JSIdentifier(context)),List(IfStatement(BinaryExpression(UnaryExpression(List(Operator(typeof)),JSIdentifier(context)),List(BinaryExtension(Operator(===),JSString(string)))),JSBlock(List(VariableDeclarations(List(VariableDeclaration(JSIdentifier(tmp),Some(CallExpression(0,JSIdentifier(fn),List(ApplyLookup(JSIdentifier(context)))))))), AssignmentExpression(Operator(=),JSIdentifier(context),JSIdentifier(fn)), AssignmentExpression(Operator(=),JSIdentifier(fn),JSIdentifier(tmp)))),None), IfStatement(UnaryExpression(List(Operator(!)),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(isFunction)), ApplyArguments(List(JSIdentifier(fn)))))),JSBlock(List(ReturnStatement(Some(JSIdentifier(undefined))))),None), VariableDeclarations(List(VariableDeclaration(JSIdentifier(args),Some(CallExpression(0,JSIdentifier(slice),List(ApplyLookup(JSIdentifier(call)), ApplyArguments(List(JSIdentifier(arguments), JSNumber(2))))))), VariableDeclaration(JSIdentifier(proxy),Some(JSFunction(None,List(),List(ReturnStatement(Some(CallExpression(0,JSIdentifier(fn),List(ApplyLookup(JSIdentifier(apply)), ApplyArguments(List(JSIdentifier(context), CallExpression(0,JSIdentifier(args),List(ApplyLookup(JSIdentifier(concat)), ApplyArguments(List(CallExpression(0,JSIdentifier(slice),List(ApplyLookup(JSIdentifier(call)), ApplyArguments(List(JSIdentifier(arguments))))))))))))))))))))), AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(proxy),List(ApplyLookup(JSIdentifier(guid)))),AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(fn),List(ApplyLookup(JSIdentifier(guid)))),BinaryExpression(CallExpression(0,JSIdentifier(fn),List(ApplyLookup(JSIdentifier(guid)))),List(BinaryExtension(Operator(||),CallExpression(0,JSIdentifier(proxy),List(ApplyLookup(JSIdentifier(guid))))), BinaryExtension(Operator(||),PostfixExpression(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(guid)))),Operator(++))))))), ReturnStatement(Some(JSIdentifier(proxy)))))), (JSIdentifier(access),JSFunction(None,List(JSIdentifier(elems), JSIdentifier(key), JSIdentifier(value), JSIdentifier(exec), JSIdentifier(fn), JSIdentifier(pass)),List(VariableDeclarations(List(VariableDeclaration(JSIdentifier(length),Some(CallExpression(0,JSIdentifier(elems),List(ApplyLookup(JSIdentifier(length)))))))), IfStatement(BinaryExpression(UnaryExpression(List(Operator(typeof)),JSIdentifier(key)),List(BinaryExtension(Operator(===),JSString(object)))),JSBlock(List(ForStatement(Some(ForInit(VariableDeclarations(List(VariableDeclaration(JSIdentifier(k),None))))),ForInUpdate(JSIdentifier(key)),JSBlock(List(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(access)), ApplyArguments(List(JSIdentifier(elems), JSIdentifier(k), CallExpression(0,JSIdentifier(key),List(ApplyLookup(JSIdentifier(k)))), JSIdentifier(exec), JSIdentifier(fn), JSIdentifier(value)))))))), ReturnStatement(Some(JSIdentifier(elems))))),None), IfStatement(BinaryExpression(JSIdentifier(value),List(BinaryExtension(Operator(!==),JSIdentifier(undefined)))),JSBlock(List(AssignmentExpression(Operator(=),JSIdentifier(exec),BinaryExpression(UnaryExpression(List(Operator(!)),JSIdentifier(pass)),List(BinaryExtension(Operator(&&),JSIdentifier(exec)), BinaryExtension(Operator(&&),CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(isFunction)), ApplyArguments(List(JSIdentifier(value))))))))), ForStatement(Some(ForInit(VariableDeclarations(List(VariableDeclaration(JSIdentifier(i),Some(JSNumber(0))))))),ForSemicolonUpdate(Some(BinaryExpression(JSIdentifier(i),List(BinaryExtension(Operator(<),JSIdentifier(length))))),Some(PostfixExpression(JSIdentifier(i),Operator(++)))),JSBlock(List(CallExpression(0,JSIdentifier(fn),List(ApplyArguments(List(CallExpression(0,JSIdentifier(elems),List(ApplyLookup(JSIdentifier(i)))), JSIdentifier(key), ConditionalExpression(JSIdentifier(exec),CallExpression(0,JSIdentifier(value),List(ApplyLookup(JSIdentifier(call)), ApplyArguments(List(CallExpression(0,JSIdentifier(elems),List(ApplyLookup(JSIdentifier(i)))), JSIdentifier(i), CallExpression(0,JSIdentifier(fn),List(ApplyArguments(List(CallExpression(0,JSIdentifier(elems),List(ApplyLookup(JSIdentifier(i)))), JSIdentifier(key))))))))),JSIdentifier(value)), JSIdentifier(pass)))))))), ReturnStatement(Some(JSIdentifier(elems))))),None), ReturnStatement(Some(ConditionalExpression(JSIdentifier(length),CallExpression(0,JSIdentifier(fn),List(ApplyArguments(List(CallExpression(0,JSIdentifier(elems),List(ApplyLookup(JSNumber(0)))), JSIdentifier(key))))),JSIdentifier(undefined))))))), (JSIdentifier(now),JSFunction(None,List(),List(ReturnStatement(Some(CallExpression(0,CallExpression(1,JSIdentifier(Date),List(ApplyArguments(List()))),List(ApplyLookup(JSIdentifier(getTime)), ApplyArguments(List())))))))), (JSIdentifier(uaMatch),JSFunction(None,List(JSIdentifier(ua)),List(AssignmentExpression(Operator(=),JSIdentifier(ua),CallExpression(0,JSIdentifier(ua),List(ApplyLookup(JSIdentifier(toLowerCase)), ApplyArguments(List())))), VariableDeclarations(List(VariableDeclaration(JSIdentifier(match),Some(BinaryExpression(CallExpression(0,JSIdentifier(rwebkit),List(ApplyLookup(JSIdentifier(exec)), ApplyArguments(List(JSIdentifier(ua))))),List(BinaryExtension(Operator(||),CallExpression(0,JSIdentifier(ropera),List(ApplyLookup(JSIdentifier(exec)), ApplyArguments(List(JSIdentifier(ua)))))), BinaryExtension(Operator(||),CallExpression(0,JSIdentifier(rmsie),List(ApplyLookup(JSIdentifier(exec)), ApplyArguments(List(JSIdentifier(ua)))))), BinaryExtension(Operator(||),BinaryExpression(BinaryExpression(CallExpression(0,JSIdentifier(ua),List(ApplyLookup(JSIdentifier(indexOf)), ApplyArguments(List(JSString(compatible))))),List(BinaryExtension(Operator(<),JSNumber(0)))),List(BinaryExtension(Operator(&&),CallExpression(0,JSIdentifier(rmozilla),List(ApplyLookup(JSIdentifier(exec)), ApplyArguments(List(JSIdentifier(ua))))))))), BinaryExtension(Operator(||),JSArrayLiteral(List())))))))), ReturnStatement(Some(JSLiteralObject(List((JSIdentifier(browser),BinaryExpression(CallExpression(0,JSIdentifier(match),List(ApplyLookup(JSNumber(1)))),List(BinaryExtension(Operator(||),JSString())))), (JSIdentifier(version),BinaryExpression(CallExpression(0,JSIdentifier(match),List(ApplyLookup(JSNumber(2)))),List(BinaryExtension(Operator(||),JSString(0)))))))))))), (JSIdentifier(sub),JSFunction(None,List(),List()))))))))))
N JSSource(List(Call(Lookup(JSIdentifier(jQuery),JSIdentifier(extend)),List(JSLiteralObject(List((JSIdentifier(noConflict),JSFunction(None,List(JSIdentifier(deep)),List(IfStatement(OperatorCall(Operator(===),List(Lookup(JSIdentifier(window),JSIdentifier($)), JSIdentifier(jQuery))),JSBlock(List(JSBlock(List(Assign(Lookup(JSIdentifier(window),JSIdentifier($)),JSIdentifier(_$)))))),None), IfStatement(OperatorCall(Operator(&&),List(JSIdentifier(deep), OperatorCall(Operator(===),List(Lookup(JSIdentifier(window),JSIdentifier(jQuery)), JSIdentifier(jQuery))))),JSBlock(List(JSBlock(List(Assign(Lookup(JSIdentifier(window),JSIdentifier(jQuery)),JSIdentifier(_jQuery)))))),None), ReturnStatement(Some(JSIdentifier(jQuery)))))), (JSIdentifier(isReady),JSIdentifier(false)), (JSIdentifier(readyWait),JSNumber(1)), (JSIdentifier(holdReady),JSFunction(None,List(JSIdentifier(hold)),List(IfStatement(JSIdentifier(hold),JSBlock(List(JSBlock(List(PostfixExpression(Lookup(JSIdentifier(jQuery),JSIdentifier(readyWait)),Operator(++)))))),Some(JSBlock(List(JSBlock(List(Call(Lookup(JSIdentifier(jQuery),JSIdentifier(ready)),List(JSIdentifier(true)))))))))))), (JSIdentifier(ready),JSFunction(None,List(JSIdentifier(wait)),List(IfStatement(OperatorCall(Operator(||),List(OperatorCall(Operator(&&),List(OperatorCall(Operator(===),List(JSIdentifier(wait), JSIdentifier(true))), OperatorCall(Operator(!),List(OperatorCall(Operator(--),List(Lookup(JSIdentifier(jQuery),JSIdentifier(readyWait)))))))), OperatorCall(Operator(&&),List(OperatorCall(Operator(!==),List(JSIdentifier(wait), JSIdentifier(true))), OperatorCall(Operator(!),List(Lookup(JSIdentifier(jQuery),JSIdentifier(isReady)))))))),JSBlock(List(JSBlock(List(IfStatement(OperatorCall(Operator(!),List(Lookup(JSIdentifier(document),JSIdentifier(body)))),JSBlock(List(JSBlock(List(ReturnStatement(Some(Call(JSIdentifier(setTimeout),List(Lookup(JSIdentifier(jQuery),JSIdentifier(ready)), JSNumber(1))))))))),None), Assign(Lookup(JSIdentifier(jQuery),JSIdentifier(isReady)),JSIdentifier(true)), IfStatement(OperatorCall(Operator(&&),List(OperatorCall(Operator(!==),List(JSIdentifier(wait), JSIdentifier(true))), OperatorCall(Operator(>),List(OperatorCall(Operator(--),List(Lookup(JSIdentifier(jQuery),JSIdentifier(readyWait)))), JSNumber(0))))),JSBlock(List(JSBlock(List(ReturnStatement(None))))),None), Call(Lookup(JSIdentifier(readyList),JSIdentifier(resolveWith)),List(JSIdentifier(document), JSArrayLiteral(List(Some(JSIdentifier(jQuery)))))), IfStatement(Lookup(Lookup(JSIdentifier(jQuery),JSIdentifier(fn)),JSIdentifier(trigger)),JSBlock(List(JSBlock(List(Call(Lookup(Call(Lookup(Call(JSIdentifier(jQuery),List(JSIdentifier(document))),JSIdentifier(trigger)),List(JSString(ready))),JSIdentifier(unbind)),List(JSString(ready))))))),None))))),None)))), (JSIdentifier(bindReady),JSFunction(None,List(),List(IfStatement(JSIdentifier(readyList),JSBlock(List(JSBlock(List(ReturnStatement(None))))),None), Assign(JSIdentifier(readyList),Call(Lookup(JSIdentifier(jQuery),JSIdentifier(_Deferred)),List())), IfStatement(OperatorCall(Operator(===),List(Lookup(JSIdentifier(document),JSIdentifier(readyState)), JSString(complete))),JSBlock(List(JSBlock(List(ReturnStatement(Some(Call(JSIdentifier(setTimeout),List(Lookup(JSIdentifier(jQuery),JSIdentifier(ready)), JSNumber(1))))))))),None), IfStatement(Lookup(JSIdentifier(document),JSIdentifier(addEventListener)),JSBlock(List(JSBlock(List(Call(Lookup(JSIdentifier(document),JSIdentifier(addEventListener)),List(JSString(DOMContentLoaded), JSIdentifier(DOMContentLoaded), JSIdentifier(false))), Call(Lookup(JSIdentifier(window),JSIdentifier(addEventListener)),List(JSString(load), Lookup(JSIdentifier(jQuery),JSIdentifier(ready)), JSIdentifier(false))))))),Some(JSBlock(List(IfStatement(Lookup(JSIdentifier(document),JSIdentifier(attachEvent)),JSBlock(List(JSBlock(List(Call(Lookup(JSIdentifier(document),JSIdentifier(attachEvent)),List(JSString(onreadystatechange), JSIdentifier(DOMContentLoaded))), Call(Lookup(JSIdentifier(window),JSIdentifier(attachEvent)),List(JSString(onload), Lookup(JSIdentifier(jQuery),JSIdentifier(ready)))), Declare(JSIdentifier(toplevel)), Assign(JSIdentifier(toplevel),JSIdentifier(false)), Try(JSBlock(List(JSBlock(List(Assign(JSIdentifier(toplevel),OperatorCall(Operator(==),List(Lookup(JSIdentifier(window),JSIdentifier(frameElement)), JSIdentifier(null)))))))),Some(Catch(JSIdentifier(e),JSBlock(List(JSBlock(List()))))),None), IfStatement(OperatorCall(Operator(&&),List(Lookup(Lookup(JSIdentifier(document),JSIdentifier(documentElement)),JSIdentifier(doScroll)), JSIdentifier(toplevel))),JSBlock(List(JSBlock(List(Call(JSIdentifier(doScrollCheck),List()))))),None))))),None)))))))), (JSIdentifier(isFunction),JSFunction(None,List(JSIdentifier(obj)),List(ReturnStatement(Some(OperatorCall(Operator(===),List(Call(Lookup(JSIdentifier(jQuery),JSIdentifier(type)),List(JSIdentifier(obj))), JSString(function)))))))), (JSIdentifier(isArray),OperatorCall(Operator(||),List(Lookup(JSIdentifier(Array),JSIdentifier(isArray)), JSFunction(None,List(JSIdentifier(obj)),List(ReturnStatement(Some(OperatorCall(Operator(===),List(Call(Lookup(JSIdentifier(jQuery),JSIdentifier(type)),List(JSIdentifier(obj))), JSString(array)))))))))), (JSIdentifier(isWindow),JSFunction(None,List(JSIdentifier(obj)),List(ReturnStatement(Some(OperatorCall(Operator(&&),List(OperatorCall(Operator(&&),List(JSIdentifier(obj), OperatorCall(Operator(===),List(OperatorCall(Operator(typeof),List(JSIdentifier(obj))), JSString(object))))), OperatorCall(Operator(in),List(JSString(setInterval), JSIdentifier(obj)))))))))), (JSIdentifier(isNaN),JSFunction(None,List(JSIdentifier(obj)),List(ReturnStatement(Some(OperatorCall(Operator(||),List(OperatorCall(Operator(||),List(OperatorCall(Operator(==),List(JSIdentifier(obj), JSIdentifier(null))), OperatorCall(Operator(!),List(Call(Lookup(JSIdentifier(rdigit),JSIdentifier(test)),List(JSIdentifier(obj))))))), Call(JSIdentifier(isNaN),List(JSIdentifier(obj)))))))))), (JSIdentifier(type),JSFunction(None,List(JSIdentifier(obj)),List(ReturnStatement(Some(ConditionalExpression(OperatorCall(Operator(==),List(JSIdentifier(obj), JSIdentifier(null))),Call(JSIdentifier(String),List(JSIdentifier(obj))),OperatorCall(Operator(||),List(Lookup(JSIdentifier(class2type),Call(Lookup(JSIdentifier(toString),JSIdentifier(call)),List(JSIdentifier(obj)))), JSString(object))))))))), (JSIdentifier(isPlainObject),JSFunction(None,List(JSIdentifier(obj)),List(IfStatement(OperatorCall(Operator(||),List(OperatorCall(Operator(||),List(OperatorCall(Operator(||),List(OperatorCall(Operator(!),List(JSIdentifier(obj))), OperatorCall(Operator(!==),List(Call(Lookup(JSIdentifier(jQuery),JSIdentifier(type)),List(JSIdentifier(obj))), JSString(object))))), Lookup(JSIdentifier(obj),JSIdentifier(nodeType)))), Call(Lookup(JSIdentifier(jQuery),JSIdentifier(isWindow)),List(JSIdentifier(obj))))),JSBlock(List(JSBlock(List(ReturnStatement(Some(JSIdentifier(false))))))),None), IfStatement(OperatorCall(Operator(&&),List(OperatorCall(Operator(&&),List(Lookup(JSIdentifier(obj),JSIdentifier(constructor)), OperatorCall(Operator(!),List(Call(Lookup(JSIdentifier(hasOwn),JSIdentifier(call)),List(JSIdentifier(obj), JSString(constructor))))))), OperatorCall(Operator(!),List(Call(Lookup(JSIdentifier(hasOwn),JSIdentifier(call)),List(Lookup(Lookup(JSIdentifier(obj),JSIdentifier(constructor)),JSIdentifier(prototype)), JSString(isPrototypeOf))))))),JSBlock(List(JSBlock(List(ReturnStatement(Some(JSIdentifier(false))))))),None), Declare(JSIdentifier(key)), ForIn(JSBlock(List(JSIdentifier(key))),JSIdentifier(obj),JSBlock(List())), ReturnStatement(Some(OperatorCall(Operator(||),List(OperatorCall(Operator(===),List(JSIdentifier(key), JSIdentifier(undefined))), Call(Lookup(JSIdentifier(hasOwn),JSIdentifier(call)),List(JSIdentifier(obj), JSIdentifier(key)))))))))), (JSIdentifier(isEmptyObject),JSFunction(None,List(JSIdentifier(obj)),List(ForIn(JSBlock(List(Declare(JSIdentifier(name)))),JSIdentifier(obj),JSBlock(List(ReturnStatement(Some(JSIdentifier(false)))))), ReturnStatement(Some(JSIdentifier(true)))))), (JSIdentifier(error),JSFunction(None,List(JSIdentifier(msg)),List(ThrowStatement(JSIdentifier(msg))))), (JSIdentifier(parseJSON),JSFunction(None,List(JSIdentifier(data)),List(IfStatement(OperatorCall(Operator(||),List(OperatorCall(Operator(!==),List(OperatorCall(Operator(typeof),List(JSIdentifier(data))), JSString(string))), OperatorCall(Operator(!),List(JSIdentifier(data))))),JSBlock(List(JSBlock(List(ReturnStatement(Some(JSIdentifier(null))))))),None), Assign(JSIdentifier(data),Call(Lookup(JSIdentifier(jQuery),JSIdentifier(trim)),List(JSIdentifier(data)))), IfStatement(OperatorCall(Operator(&&),List(Lookup(JSIdentifier(window),JSIdentifier(JSON)), Lookup(Lookup(JSIdentifier(window),JSIdentifier(JSON)),JSIdentifier(parse)))),JSBlock(List(JSBlock(List(ReturnStatement(Some(Call(Lookup(Lookup(JSIdentifier(window),JSIdentifier(JSON)),JSIdentifier(parse)),List(JSIdentifier(data))))))))),None), IfStatement(Call(Lookup(JSIdentifier(rvalidchars),JSIdentifier(test)),List(Call(Lookup(Call(Lookup(Call(Lookup(JSIdentifier(data),JSIdentifier(replace)),List(JSIdentifier(rvalidescape), JSString(@))),JSIdentifier(replace)),List(JSIdentifier(rvalidtokens), JSString(]))),JSIdentifier(replace)),List(JSIdentifier(rvalidbraces), JSString())))),JSBlock(List(JSBlock(List(ReturnStatement(Some(Call(New(JSIdentifier(Function),List(OperatorCall(Operator(+),List(JSString(return ), JSIdentifier(data))))),List()))))))),None), Call(Lookup(JSIdentifier(jQuery),JSIdentifier(error)),List(OperatorCall(Operator(+),List(JSString(Invalid JSON: ), JSIdentifier(data)))))))), (JSIdentifier(parseXML),JSFunction(None,List(JSIdentifier(data), JSIdentifier(xml), JSIdentifier(tmp)),List(IfStatement(Lookup(JSIdentifier(window),JSIdentifier(DOMParser)),JSBlock(List(JSBlock(List(Assign(JSIdentifier(tmp),New(JSIdentifier(DOMParser),List())), Assign(JSIdentifier(xml),Call(Lookup(JSIdentifier(tmp),JSIdentifier(parseFromString)),List(JSIdentifier(data), JSString(text/xml)))))))),Some(JSBlock(List(JSBlock(List(Assign(JSIdentifier(xml),New(JSIdentifier(ActiveXObject),List(JSString(Microsoft.XMLDOM)))), Assign(Lookup(JSIdentifier(xml),JSIdentifier(async)),JSString(false)), Call(Lookup(JSIdentifier(xml),JSIdentifier(loadXML)),List(JSIdentifier(data))))))))), Assign(JSIdentifier(tmp),Lookup(JSIdentifier(xml),JSIdentifier(documentElement))), IfStatement(OperatorCall(Operator(||),List(OperatorCall(Operator(||),List(OperatorCall(Operator(!),List(JSIdentifier(tmp))), OperatorCall(Operator(!),List(Lookup(JSIdentifier(tmp),JSIdentifier(nodeName)))))), OperatorCall(Operator(===),List(Lookup(JSIdentifier(tmp),JSIdentifier(nodeName)), JSString(parsererror))))),JSBlock(List(JSBlock(List(Call(Lookup(JSIdentifier(jQuery),JSIdentifier(error)),List(OperatorCall(Operator(+),List(JSString(Invalid XML: ), JSIdentifier(data))))))))),None), ReturnStatement(Some(JSIdentifier(xml)))))), (JSIdentifier(noop),JSFunction(None,List(),List())), (JSIdentifier(globalEval),JSFunction(None,List(JSIdentifier(data)),List(IfStatement(OperatorCall(Operator(&&),List(JSIdentifier(data), Call(Lookup(JSIdentifier(rnotwhite),JSIdentifier(test)),List(JSIdentifier(data))))),JSBlock(List(JSBlock(List(Call(OperatorCall(Operator(||),List(Lookup(JSIdentifier(window),JSIdentifier(execScript)), JSFunction(None,List(JSIdentifier(data)),List(Call(Lookup(Lookup(JSIdentifier(window),JSString(eval)),JSIdentifier(call)),List(JSIdentifier(window), JSIdentifier(data))))))),List(JSIdentifier(data))))))),None)))), (JSIdentifier(camelCase),JSFunction(None,List(JSIdentifier(string)),List(ReturnStatement(Some(Call(Lookup(JSIdentifier(string),JSIdentifier(replace)),List(JSIdentifier(rdashAlpha), JSIdentifier(fcamelCase)))))))), (JSIdentifier(nodeName),JSFunction(None,List(JSIdentifier(elem), JSIdentifier(name)),List(ReturnStatement(Some(OperatorCall(Operator(&&),List(Lookup(JSIdentifier(elem),JSIdentifier(nodeName)), OperatorCall(Operator(===),List(Call(Lookup(Lookup(JSIdentifier(elem),JSIdentifier(nodeName)),JSIdentifier(toUpperCase)),List()), Call(Lookup(JSIdentifier(name),JSIdentifier(toUpperCase)),List())))))))))), (JSIdentifier(each),JSFunction(None,List(JSIdentifier(object), JSIdentifier(callback), JSIdentifier(args)),List(Declare(JSIdentifier(name)), Declare(JSIdentifier(i)), Assign(JSIdentifier(i),JSNumber(0)), Declare(JSIdentifier(length)), Assign(JSIdentifier(length),Lookup(JSIdentifier(object),JSIdentifier(length))), Declare(JSIdentifier(isObj)), Assign(JSIdentifier(isObj),OperatorCall(Operator(||),List(OperatorCall(Operator(===),List(JSIdentifier(length), JSIdentifier(undefined))), Call(Lookup(JSIdentifier(jQuery),JSIdentifier(isFunction)),List(JSIdentifier(object)))))), IfStatement(JSIdentifier(args),JSBlock(List(JSBlock(List(IfStatement(JSIdentifier(isObj),JSBlock(List(JSBlock(List(ForIn(JSBlock(List(JSIdentifier(name))),JSIdentifier(object),JSBlock(List(IfStatement(BinaryExpression(CallExpression(0,JSIdentifier(callback),List(ApplyLookup(JSIdentifier(apply)), ApplyArguments(List(CallExpression(0,JSIdentifier(object),List(ApplyLookup(JSIdentifier(name)))), JSIdentifier(args))))),List(BinaryExtension(Operator(===),JSIdentifier(false)))),JSBlock(List(BreakStatement(None))),None)))))))),Some(JSBlock(List(JSBlock(List(While(OperatorCall(Operator(<),List(JSIdentifier(i), JSIdentifier(length))),JSBlock(List(JSBlock(List(IfStatement(OperatorCall(Operator(===),List(Call(Lookup(JSIdentifier(callback),JSIdentifier(apply)),List(Lookup(JSIdentifier(object),PostfixExpression(JSIdentifier(i),Operator(++))), JSIdentifier(args))), JSIdentifier(false))),JSBlock(List(JSBlock(List(BreakStatement(None))))),None)))))))))))))))),Some(JSBlock(List(JSBlock(List(IfStatement(JSIdentifier(isObj),JSBlock(List(JSBlock(List(ForIn(JSBlock(List(JSIdentifier(name))),JSIdentifier(object),JSBlock(List(IfStatement(BinaryExpression(CallExpression(0,JSIdentifier(callback),List(ApplyLookup(JSIdentifier(call)), ApplyArguments(List(CallExpression(0,JSIdentifier(object),List(ApplyLookup(JSIdentifier(name)))), JSIdentifier(name), CallExpression(0,JSIdentifier(object),List(ApplyLookup(JSIdentifier(name)))))))),List(BinaryExtension(Operator(===),JSIdentifier(false)))),JSBlock(List(BreakStatement(None))),None)))))))),Some(JSBlock(List(JSBlock(List(While(OperatorCall(Operator(<),List(JSIdentifier(i), JSIdentifier(length))),JSBlock(List(JSBlock(List(IfStatement(OperatorCall(Operator(===),List(Call(Lookup(JSIdentifier(callback),JSIdentifier(call)),List(Lookup(JSIdentifier(object),JSIdentifier(i)), JSIdentifier(i), Lookup(JSIdentifier(object),PostfixExpression(JSIdentifier(i),Operator(++))))), JSIdentifier(false))),JSBlock(List(JSBlock(List(BreakStatement(None))))),None)))))))))))))))))), ReturnStatement(Some(JSIdentifier(object)))))), (JSIdentifier(trim),ConditionalExpression(JSIdentifier(trim),JSFunction(None,List(JSIdentifier(text)),List(ReturnStatement(Some(ConditionalExpression(OperatorCall(Operator(==),List(JSIdentifier(text), JSIdentifier(null))),JSString(),Call(Lookup(JSIdentifier(trim),JSIdentifier(call)),List(JSIdentifier(text)))))))),JSFunction(None,List(JSIdentifier(text)),List(ReturnStatement(Some(ConditionalExpression(OperatorCall(Operator(==),List(JSIdentifier(text), JSIdentifier(null))),JSString(),Call(Lookup(Call(Lookup(Call(Lookup(JSIdentifier(text),JSIdentifier(toString)),List()),JSIdentifier(replace)),List(JSIdentifier(trimLeft), JSString())),JSIdentifier(replace)),List(JSIdentifier(trimRight), JSString()))))))))), (JSIdentifier(makeArray),JSFunction(None,List(JSIdentifier(array), JSIdentifier(results)),List(Declare(JSIdentifier(ret)), Assign(JSIdentifier(ret),OperatorCall(Operator(||),List(JSIdentifier(results), JSArrayLiteral(List())))), IfStatement(OperatorCall(Operator(!=),List(JSIdentifier(array), JSIdentifier(null))),JSBlock(List(JSBlock(List(Declare(JSIdentifier(type)), Assign(JSIdentifier(type),Call(Lookup(JSIdentifier(jQuery),JSIdentifier(type)),List(JSIdentifier(array)))), IfStatement(OperatorCall(Operator(||),List(OperatorCall(Operator(||),List(OperatorCall(Operator(||),List(OperatorCall(Operator(||),List(OperatorCall(Operator(==),List(Lookup(JSIdentifier(array),JSIdentifier(length)), JSIdentifier(null))), OperatorCall(Operator(===),List(JSIdentifier(type), JSString(string))))), OperatorCall(Operator(===),List(JSIdentifier(type), JSString(function))))), OperatorCall(Operator(===),List(JSIdentifier(type), JSString(regexp))))), Call(Lookup(JSIdentifier(jQuery),JSIdentifier(isWindow)),List(JSIdentifier(array))))),JSBlock(List(JSBlock(List(Call(Lookup(JSIdentifier(push),JSIdentifier(call)),List(JSIdentifier(ret), JSIdentifier(array))))))),Some(JSBlock(List(JSBlock(List(Call(Lookup(JSIdentifier(jQuery),JSIdentifier(merge)),List(JSIdentifier(ret), JSIdentifier(array))))))))))))),None), ReturnStatement(Some(JSIdentifier(ret)))))), (JSIdentifier(inArray),JSFunction(None,List(JSIdentifier(elem), JSIdentifier(array)),List(IfStatement(JSIdentifier(indexOf),JSBlock(List(JSBlock(List(ReturnStatement(Some(Call(Lookup(JSIdentifier(indexOf),JSIdentifier(call)),List(JSIdentifier(array), JSIdentifier(elem))))))))),None), JSBlock(List(Declare(JSIdentifier(i)), Assign(JSIdentifier(i),JSNumber(0)), Declare(JSIdentifier(length)), Assign(JSIdentifier(length),Lookup(JSIdentifier(array),JSIdentifier(length))), While(OperatorCall(Operator(<),List(JSIdentifier(i), JSIdentifier(length))),JSBlock(List(JSBlock(List(JSBlock(List(IfStatement(OperatorCall(Operator(===),List(Lookup(JSIdentifier(array),JSIdentifier(i)), JSIdentifier(elem))),JSBlock(List(JSBlock(List(ReturnStatement(Some(JSIdentifier(i))))))),None))), PostfixExpression(JSIdentifier(i),Operator(++))))))))), ReturnStatement(Some(OperatorCall(Operator(-),List(JSNumber(1)))))))), (JSIdentifier(merge),JSFunction(None,List(JSIdentifier(first), JSIdentifier(second)),List(Declare(JSIdentifier(i)), Assign(JSIdentifier(i),Lookup(JSIdentifier(first),JSIdentifier(length))), Declare(JSIdentifier(j)), Assign(JSIdentifier(j),JSNumber(0)), IfStatement(OperatorCall(Operator(===),List(OperatorCall(Operator(typeof),List(Lookup(JSIdentifier(second),JSIdentifier(length)))), JSString(number))),JSBlock(List(JSBlock(List(JSBlock(List(Declare(JSIdentifier(l)), Assign(JSIdentifier(l),Lookup(JSIdentifier(second),JSIdentifier(length))), While(OperatorCall(Operator(<),List(JSIdentifier(j), JSIdentifier(l))),JSBlock(List(JSBlock(List(JSBlock(List(Assign(Lookup(JSIdentifier(first),PostfixExpression(JSIdentifier(i),Operator(++))),Lookup(JSIdentifier(second),JSIdentifier(j))))), PostfixExpression(JSIdentifier(j),Operator(++))))))))))))),Some(JSBlock(List(JSBlock(List(While(OperatorCall(Operator(!==),List(Lookup(JSIdentifier(second),JSIdentifier(j)), JSIdentifier(undefined))),JSBlock(List(JSBlock(List(Assign(Lookup(JSIdentifier(first),PostfixExpression(JSIdentifier(i),Operator(++))),Lookup(JSIdentifier(second),PostfixExpression(JSIdentifier(j),Operator(++))))))))))))))), Assign(Lookup(JSIdentifier(first),JSIdentifier(length)),JSIdentifier(i)), ReturnStatement(Some(JSIdentifier(first)))))), (JSIdentifier(grep),JSFunction(None,List(JSIdentifier(elems), JSIdentifier(callback), JSIdentifier(inv)),List(Declare(JSIdentifier(ret)), Assign(JSIdentifier(ret),JSArrayLiteral(List())), Declare(JSIdentifier(retVal)), Assign(JSIdentifier(inv),OperatorCall(Operator(!),List(OperatorCall(Operator(!),List(JSIdentifier(inv)))))), JSBlock(List(Declare(JSIdentifier(i)), Assign(JSIdentifier(i),JSNumber(0)), Declare(JSIdentifier(length)), Assign(JSIdentifier(length),Lookup(JSIdentifier(elems),JSIdentifier(length))), While(OperatorCall(Operator(<),List(JSIdentifier(i), JSIdentifier(length))),JSBlock(List(JSBlock(List(JSBlock(List(Assign(JSIdentifier(retVal),OperatorCall(Operator(!),List(OperatorCall(Operator(!),List(Call(JSIdentifier(callback),List(Lookup(JSIdentifier(elems),JSIdentifier(i)), JSIdentifier(i)))))))), IfStatement(OperatorCall(Operator(!==),List(JSIdentifier(inv), JSIdentifier(retVal))),JSBlock(List(JSBlock(List(Call(Lookup(JSIdentifier(ret),JSIdentifier(push)),List(Lookup(JSIdentifier(elems),JSIdentifier(i)))))))),None))), PostfixExpression(JSIdentifier(i),Operator(++))))))))), ReturnStatement(Some(JSIdentifier(ret)))))), (JSIdentifier(map),JSFunction(None,List(JSIdentifier(elems), JSIdentifier(callback), JSIdentifier(arg)),List(Declare(JSIdentifier(value)), Declare(JSIdentifier(key)), Declare(JSIdentifier(ret)), Assign(JSIdentifier(ret),JSArrayLiteral(List())), Declare(JSIdentifier(i)), Assign(JSIdentifier(i),JSNumber(0)), Declare(JSIdentifier(length)), Assign(JSIdentifier(length),Lookup(JSIdentifier(elems),JSIdentifier(length))), Declare(JSIdentifier(isArray)), Assign(JSIdentifier(isArray),OperatorCall(Operator(||),List(OperatorCall(Operator(instanceof),List(JSIdentifier(elems), JSIdentifier(jQuery))), OperatorCall(Operator(&&),List(OperatorCall(Operator(&&),List(OperatorCall(Operator(!==),List(JSIdentifier(length), JSIdentifier(undefined))), OperatorCall(Operator(===),List(OperatorCall(Operator(typeof),List(JSIdentifier(length))), JSString(number))))), OperatorCall(Operator(||),List(OperatorCall(Operator(||),List(OperatorCall(Operator(&&),List(OperatorCall(Operator(&&),List(OperatorCall(Operator(>),List(JSIdentifier(length), JSNumber(0))), Lookup(JSIdentifier(elems),JSNumber(0)))), Lookup(JSIdentifier(elems),OperatorCall(Operator(-),List(JSIdentifier(length), JSNumber(1)))))), OperatorCall(Operator(===),List(JSIdentifier(length), JSNumber(0))))), Call(Lookup(JSIdentifier(jQuery),JSIdentifier(isArray)),List(JSIdentifier(elems)))))))))), IfStatement(JSIdentifier(isArray),JSBlock(List(JSBlock(List(While(OperatorCall(Operator(<),List(JSIdentifier(i), JSIdentifier(length))),JSBlock(List(JSBlock(List(JSBlock(List(Assign(JSIdentifier(value),Call(JSIdentifier(callback),List(Lookup(JSIdentifier(elems),JSIdentifier(i)), JSIdentifier(i), JSIdentifier(arg)))), IfStatement(OperatorCall(Operator(!=),List(JSIdentifier(value), JSIdentifier(null))),JSBlock(List(JSBlock(List(Assign(Lookup(JSIdentifier(ret),Lookup(JSIdentifier(ret),JSIdentifier(length))),JSIdentifier(value)))))),None))), PostfixExpression(JSIdentifier(i),Operator(++))))))))))),Some(JSBlock(List(JSBlock(List(ForIn(JSBlock(List(JSIdentifier(key))),JSIdentifier(elems),JSBlock(List(AssignmentExpression(Operator(=),JSIdentifier(value),CallExpression(0,JSIdentifier(callback),List(ApplyArguments(List(CallExpression(0,JSIdentifier(elems),List(ApplyLookup(JSIdentifier(key)))), JSIdentifier(key), JSIdentifier(arg)))))), IfStatement(BinaryExpression(JSIdentifier(value),List(BinaryExtension(Operator(!=),JSIdentifier(null)))),JSBlock(List(AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(ret),List(ApplyLookup(CallExpression(0,JSIdentifier(ret),List(ApplyLookup(JSIdentifier(length))))))),JSIdentifier(value)))),None)))))))))), ReturnStatement(Some(Call(Lookup(Lookup(JSIdentifier(ret),JSIdentifier(concat)),JSIdentifier(apply)),List(JSArrayLiteral(List()), JSIdentifier(ret)))))))), (JSIdentifier(guid),JSNumber(1)), (JSIdentifier(proxy),JSFunction(None,List(JSIdentifier(fn), JSIdentifier(context)),List(IfStatement(OperatorCall(Operator(===),List(OperatorCall(Operator(typeof),List(JSIdentifier(context))), JSString(string))),JSBlock(List(JSBlock(List(Declare(JSIdentifier(tmp)), Assign(JSIdentifier(tmp),Lookup(JSIdentifier(fn),JSIdentifier(context))), Assign(JSIdentifier(context),JSIdentifier(fn)), Assign(JSIdentifier(fn),JSIdentifier(tmp)))))),None), IfStatement(OperatorCall(Operator(!),List(Call(Lookup(JSIdentifier(jQuery),JSIdentifier(isFunction)),List(JSIdentifier(fn))))),JSBlock(List(JSBlock(List(ReturnStatement(Some(JSIdentifier(undefined))))))),None), Declare(JSIdentifier(args)), Assign(JSIdentifier(args),Call(Lookup(JSIdentifier(slice),JSIdentifier(call)),List(JSIdentifier(arguments), JSNumber(2)))), Declare(JSIdentifier(proxy)), Assign(JSIdentifier(proxy),JSFunction(None,List(),List(ReturnStatement(Some(Call(Lookup(JSIdentifier(fn),JSIdentifier(apply)),List(JSIdentifier(context), Call(Lookup(JSIdentifier(args),JSIdentifier(concat)),List(Call(Lookup(JSIdentifier(slice),JSIdentifier(call)),List(JSIdentifier(arguments)))))))))))), Assign(Lookup(JSIdentifier(proxy),JSIdentifier(guid)),Assign(Lookup(JSIdentifier(fn),JSIdentifier(guid)),OperatorCall(Operator(||),List(OperatorCall(Operator(||),List(Lookup(JSIdentifier(fn),JSIdentifier(guid)), Lookup(JSIdentifier(proxy),JSIdentifier(guid)))), PostfixExpression(Lookup(JSIdentifier(jQuery),JSIdentifier(guid)),Operator(++)))))), ReturnStatement(Some(JSIdentifier(proxy)))))), (JSIdentifier(access),JSFunction(None,List(JSIdentifier(elems), JSIdentifier(key), JSIdentifier(value), JSIdentifier(exec), JSIdentifier(fn), JSIdentifier(pass)),List(Declare(JSIdentifier(length)), Assign(JSIdentifier(length),Lookup(JSIdentifier(elems),JSIdentifier(length))), IfStatement(OperatorCall(Operator(===),List(OperatorCall(Operator(typeof),List(JSIdentifier(key))), JSString(object))),JSBlock(List(JSBlock(List(ForIn(JSBlock(List(Declare(JSIdentifier(k)))),JSIdentifier(key),JSBlock(List(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(access)), ApplyArguments(List(JSIdentifier(elems), JSIdentifier(k), CallExpression(0,JSIdentifier(key),List(ApplyLookup(JSIdentifier(k)))), JSIdentifier(exec), JSIdentifier(fn), JSIdentifier(value)))))))), ReturnStatement(Some(JSIdentifier(elems))))))),None), IfStatement(OperatorCall(Operator(!==),List(JSIdentifier(value), JSIdentifier(undefined))),JSBlock(List(JSBlock(List(Assign(JSIdentifier(exec),OperatorCall(Operator(&&),List(OperatorCall(Operator(&&),List(OperatorCall(Operator(!),List(JSIdentifier(pass))), JSIdentifier(exec))), Call(Lookup(JSIdentifier(jQuery),JSIdentifier(isFunction)),List(JSIdentifier(value)))))), JSBlock(List(Declare(JSIdentifier(i)), Assign(JSIdentifier(i),JSNumber(0)), While(OperatorCall(Operator(<),List(JSIdentifier(i), JSIdentifier(length))),JSBlock(List(JSBlock(List(JSBlock(List(Call(JSIdentifier(fn),List(Lookup(JSIdentifier(elems),JSIdentifier(i)), JSIdentifier(key), ConditionalExpression(JSIdentifier(exec),Call(Lookup(JSIdentifier(value),JSIdentifier(call)),List(Lookup(JSIdentifier(elems),JSIdentifier(i)), JSIdentifier(i), Call(JSIdentifier(fn),List(Lookup(JSIdentifier(elems),JSIdentifier(i)), JSIdentifier(key))))),JSIdentifier(value)), JSIdentifier(pass))))), PostfixExpression(JSIdentifier(i),Operator(++))))))))), ReturnStatement(Some(JSIdentifier(elems))))))),None), ReturnStatement(Some(ConditionalExpression(JSIdentifier(length),Call(JSIdentifier(fn),List(Lookup(JSIdentifier(elems),JSNumber(0)), JSIdentifier(key))),JSIdentifier(undefined))))))), (JSIdentifier(now),JSFunction(None,List(),List(ReturnStatement(Some(Call(Lookup(New(JSIdentifier(Date),List()),JSIdentifier(getTime)),List())))))), (JSIdentifier(uaMatch),JSFunction(None,List(JSIdentifier(ua)),List(Assign(JSIdentifier(ua),Call(Lookup(JSIdentifier(ua),JSIdentifier(toLowerCase)),List())), Declare(JSIdentifier(match)), Assign(JSIdentifier(match),OperatorCall(Operator(||),List(OperatorCall(Operator(||),List(OperatorCall(Operator(||),List(OperatorCall(Operator(||),List(Call(Lookup(JSIdentifier(rwebkit),JSIdentifier(exec)),List(JSIdentifier(ua))), Call(Lookup(JSIdentifier(ropera),JSIdentifier(exec)),List(JSIdentifier(ua))))), Call(Lookup(JSIdentifier(rmsie),JSIdentifier(exec)),List(JSIdentifier(ua))))), OperatorCall(Operator(&&),List(OperatorCall(Operator(<),List(Call(Lookup(JSIdentifier(ua),JSIdentifier(indexOf)),List(JSString(compatible))), JSNumber(0))), Call(Lookup(JSIdentifier(rmozilla),JSIdentifier(exec)),List(JSIdentifier(ua))))))), JSArrayLiteral(List())))), ReturnStatement(Some(JSLiteralObject(List((JSIdentifier(browser),OperatorCall(Operator(||),List(Lookup(JSIdentifier(match),JSNumber(1)), JSString()))), (JSIdentifier(version),OperatorCall(Operator(||),List(Lookup(JSIdentifier(match),JSNumber(2)), JSString(0))))))))))), (JSIdentifier(sub),JSFunction(None,List(),List()))))))))

O JSSource(List(CallExpression(0,JSIdentifier(print),List(ApplyArguments(List(JSString(hello))))), CallExpression(0,JSIdentifier(print),List(ApplyArguments(List(JSString(world))))), CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(extend)), ApplyArguments(List(JSIdentifier(true), JSIdentifier(jQuerySub), JSIdentifier(this))))), AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(jQuerySub),List(ApplyLookup(JSIdentifier(superclass)))),JSIdentifier(this)), AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(jQuerySub),List(ApplyLookup(JSIdentifier(fn)))),AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(jQuerySub),List(ApplyLookup(JSIdentifier(prototype)))),CallExpression(0,JSIdentifier(this),List(ApplyArguments(List()))))), AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(jQuerySub),List(ApplyLookup(JSIdentifier(fn)), ApplyLookup(JSIdentifier(constructor)))),JSIdentifier(jQuerySub)), AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(jQuerySub),List(ApplyLookup(JSIdentifier(sub)))),CallExpression(0,JSIdentifier(this),List(ApplyLookup(JSIdentifier(sub))))), AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(jQuerySub),List(ApplyLookup(JSIdentifier(fn)), ApplyLookup(JSIdentifier(init)))),JSFunction(Some(JSIdentifier(init)),List(JSIdentifier(selector), JSIdentifier(context)),List(IfStatement(BinaryExpression(JSIdentifier(context),List(BinaryExtension(Operator(&&),BinaryExpression(JSIdentifier(context),List(BinaryExtension(Operator(instanceof),JSIdentifier(jQuery))))), BinaryExtension(Operator(&&),UnaryExpression(List(Operator(!)),BinaryExpression(JSIdentifier(context),List(BinaryExtension(Operator(instanceof),JSIdentifier(jQuerySub)))))))),JSBlock(List(AssignmentExpression(Operator(=),JSIdentifier(context),CallExpression(0,JSIdentifier(jQuerySub),List(ApplyArguments(List(JSIdentifier(context)))))))),None), ReturnStatement(Some(CallExpression(0,JSIdentifier(jQuery),List(ApplyLookup(JSIdentifier(fn)), ApplyLookup(JSIdentifier(init)), ApplyLookup(JSIdentifier(call)), ApplyArguments(List(JSIdentifier(this), JSIdentifier(selector), JSIdentifier(context), JSIdentifier(rootjQuerySub)))))))))), JSFunction(Some(JSIdentifier(jQuerySub)),List(JSIdentifier(selector), JSIdentifier(context)),List(ReturnStatement(Some(CallExpression(1,JSIdentifier(jQuerySub),List(ApplyLookup(JSIdentifier(fn)), ApplyLookup(JSIdentifier(init)), ApplyArguments(List(JSIdentifier(selector), JSIdentifier(context))))))))), AssignmentExpression(Operator(=),CallExpression(0,JSIdentifier(jQuerySub),List(ApplyLookup(JSIdentifier(fn)), ApplyLookup(JSIdentifier(init)), ApplyLookup(JSIdentifier(prototype)))),CallExpression(0,JSIdentifier(jQuerySub),List(ApplyLookup(JSIdentifier(fn))))), VariableDeclarations(List(VariableDeclaration(JSIdentifier(rootjQuerySub),Some(CallExpression(0,JSIdentifier(jQuerySub),List(ApplyArguments(List(JSIdentifier(document)))))))))))
N JSSource(List(Call(JSIdentifier(print),List(JSString(hello))), Call(JSIdentifier(print),List(JSString(world))), Call(Lookup(JSIdentifier(jQuery),JSIdentifier(extend)),List(JSIdentifier(true), JSIdentifier(jQuerySub), JSIdentifier(this))), Assign(Lookup(JSIdentifier(jQuerySub),JSIdentifier(superclass)),JSIdentifier(this)), Assign(Lookup(JSIdentifier(jQuerySub),JSIdentifier(fn)),Assign(Lookup(JSIdentifier(jQuerySub),JSIdentifier(prototype)),Call(JSIdentifier(this),List()))), Assign(Lookup(Lookup(JSIdentifier(jQuerySub),JSIdentifier(fn)),JSIdentifier(constructor)),JSIdentifier(jQuerySub)), Assign(Lookup(JSIdentifier(jQuerySub),JSIdentifier(sub)),Lookup(JSIdentifier(this),JSIdentifier(sub))), Assign(Lookup(Lookup(JSIdentifier(jQuerySub),JSIdentifier(fn)),JSIdentifier(init)),JSFunction(Some(JSIdentifier(init)),List(JSIdentifier(selector), JSIdentifier(context)),List(IfStatement(OperatorCall(Operator(&&),List(OperatorCall(Operator(&&),List(JSIdentifier(context), OperatorCall(Operator(instanceof),List(JSIdentifier(context), JSIdentifier(jQuery))))), OperatorCall(Operator(!),List(OperatorCall(Operator(instanceof),List(JSIdentifier(context), JSIdentifier(jQuerySub))))))),JSBlock(List(JSBlock(List(Assign(JSIdentifier(context),Call(JSIdentifier(jQuerySub),List(JSIdentifier(context)))))))),None), ReturnStatement(Some(Call(Lookup(Lookup(Lookup(JSIdentifier(jQuery),JSIdentifier(fn)),JSIdentifier(init)),JSIdentifier(call)),List(JSIdentifier(this), JSIdentifier(selector), JSIdentifier(context), JSIdentifier(rootjQuerySub)))))))), JSFunction(Some(JSIdentifier(jQuerySub)),List(JSIdentifier(selector), JSIdentifier(context)),List(ReturnStatement(Some(New(Lookup(Lookup(JSIdentifier(jQuerySub),JSIdentifier(fn)),JSIdentifier(init)),List(JSIdentifier(selector), JSIdentifier(context))))))), Assign(Lookup(Lookup(Lookup(JSIdentifier(jQuerySub),JSIdentifier(fn)),JSIdentifier(init)),JSIdentifier(prototype)),Lookup(JSIdentifier(jQuerySub),JSIdentifier(fn))), Declare(JSIdentifier(rootjQuerySub)), Assign(JSIdentifier(rootjQuerySub),Call(JSIdentifier(jQuerySub),List(JSIdentifier(document))))))

     }
     
     @Test def testPart2 {
    	 testFile("jquery_part2.js")
     }

     @Test def testPart3 {
    	 testFile("jquery_part3.js")
     }

     @Test def testPart4 {
    	 testFile("jquery_part4.js")
     }
     
     @Test def testPart5 {
    	 testFile("jquery_part5.js")
     }
     
     @Test def testPart6 {
    	 testFile("jquery_part6.js")
     }

     @Test def testComplete {
    	 testFile("jquery-1.6.2.js")
     }
*/
}